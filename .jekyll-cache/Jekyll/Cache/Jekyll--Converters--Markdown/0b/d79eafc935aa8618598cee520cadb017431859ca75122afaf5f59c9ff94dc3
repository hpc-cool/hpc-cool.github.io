I"Ìt<p>æœ¬æ–‡ä¸»è¦è®²æˆ‘è®¾è®¡çš„å‡ ä¸ªè¿›åº¦æ¡ï¼Œè¿˜æœ‰å¦‚ä½•ä½¿ç”¨å¼‚æ­¥æ§åˆ¶è¿›åº¦æ¡ï¼Œå¦‚ä½•ä½¿ç”¨åŠ¨ç”»åšè¿›åº¦ã€‚</p>

<!--more-->

<!-- CreateTime:2018/2/13 17:23:03 -->

<div id="toc"></div>

<p>è¿›åº¦æ¡å¯ä»¥å‚è§ï¼šhttp://edi.wang/post/2016/2/25/windows-10-uwp-modal-progress-dialog</p>

<p>è¿›åº¦æ¡å…¶å®å¼‚æ­¥å°±æ˜¯ä½¿ç”¨åå°å˜åŒ–ï¼Œç„¶å value ç»‘å®šï¼Œå¼‚æ­¥ç»‘å®šå¾ˆç®€å•ï¼Œå‚è§ç»‘å®šçš„æ–‡ç« ã€‚</p>

<p>æˆ‘ä½¿ç”¨ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">ProgressBar </code>éœ€è¦è®¾ç½®ä»–çš„å„ä¸ªå€¼ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œä¸€èˆ¬æœ€å¤§å€¼ä¸º100ï¼Œæœ€å°ä¸º0ï¼Œæ‰€ä»¥å¯ä»¥è¡¨ç¤ºç™¾åˆ†æ•°ï¼Œå…¶ä¸­Valueæ˜¯doubleï¼Œç»‘å®šåå°å°±å¥½ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
         &lt;ProgressBar Maximum="100" Value="{x:Bind View.Value,Mode=OneWay}" Height="20" Width="100"&gt;&lt;/ProgressBar&gt;

</code></pre></div></div>

<p>ç»‘å®šåˆ°æˆ‘ä»¬çš„ ViewModel ï¼Œä¸€èˆ¬å¦‚æœåå°çº¿ç¨‹æ“ä½œç•Œé¢æ˜¯ä¸èƒ½ç›´æ¥ï¼Œä½†æ˜¯æˆ‘ç”¨äº†ä¸‹é¢ä»£ç ï¼ŒæŠŠå¼‚æ­¥çš„çº¿ç¨‹æ”¾åœ¨åŒæ­¥</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
             <span class="k">await</span> <span class="n">CoreApplication</span><span class="p">.</span><span class="n">MainView</span><span class="p">.</span><span class="n">CoreWindow</span><span class="p">.</span><span class="n">Dispatcher</span><span class="p">.</span><span class="nf">RunAsync</span><span class="p">(</span><span class="n">CoreDispatcherPriority</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span>

                <span class="p">()</span> <span class="p">=&gt;</span>

                <span class="p">{</span>

                     

                <span class="p">});</span>

</code></pre></div></div>

<p>ä»£ç å‚è§ï¼š<a href="https://github.com/lindexi/UWP/tree/master/uwp/control/Progress">https://github.com/lindexi/UWP/tree/master/uwp/control/Progress</a>ï¼Œé¡¹ç›®æ‰€æœ‰ä»£ç éƒ½ä¼šå‘å‡ºï¼Œæ‰€ä»¥å¯ä»¥çœ‹æˆ‘çš„ç½‘ç«™</p>

<p>æˆ‘ä»¬ä½¿ç”¨ Task å¼‚æ­¥ï¼Œæˆ‘ä»¬å› ä¸ºæ²¡æœ‰ä»€ä¹ˆè€—æ—¶çš„ï¼Œå°±<code class="language-plaintext highlighter-rouge">Task.Delay(1000).Wait();</code>æˆ‘ä»¬è¿›åº¦ä¼šç­‰ä¸€ç§’ï¼Œå½“ç„¶è‡ªå·±ä¹Ÿå¯ä»¥è®¾ç½®å¤šäº›ã€‚ä¹Ÿå¯ä»¥å†™ <code class="language-plaintext highlighter-rouge">await Task.Dalay(1000);</code></p>

<p>ViewModel</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
        <span class="k">public</span> <span class="nf">ViewModel</span><span class="p">()</span>
        <span class="p">{</span>

            <span class="k">new</span> <span class="nf">Task</span><span class="p">(()</span> <span class="p">=&gt;</span>
            <span class="p">{</span>
                <span class="k">while</span> <span class="p">(</span><span class="n">Value</span> <span class="p">&lt;</span> <span class="m">90</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">Value</span> <span class="p">+=</span> <span class="m">10</span><span class="p">;</span>
                    <span class="n">Task</span><span class="p">.</span><span class="nf">Delay</span><span class="p">(</span><span class="m">1000</span><span class="p">).</span><span class="nf">Wait</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}).</span><span class="nf">Start</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">double</span> <span class="n">Value</span>
        <span class="p">{</span>
            <span class="k">set</span>
            <span class="p">{</span>
                <span class="n">_value</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
                <span class="nf">OnPropertyChanged</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">get</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="n">_value</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="kt">double</span> <span class="n">_value</span><span class="p">;</span>

</code></pre></div></div>

<p>é»˜è®¤è¿›åº¦æ¡è®¾ç½®æœ€å¤§å€¼ï¼Œ</p>

<p>æˆ‘è¿˜è‡ªå·±çš„æ§ä»¶ï¼Œä¸€ä¸ªå€¼ä»0åˆ°100çš„åœ†å½¢çš„ï¼Œå¯ä»¥çœ‹ä¸‹é¢</p>

<h2 id="åœ†å½¢è¿›åº¦æ¡">åœ†å½¢è¿›åº¦æ¡</h2>

<p>å‚è§ï¼šhttp://www.cnblogs.com/ms-uap/p/4641419.html</p>

<p>å…ˆè¯´æ€ä¹ˆç”¨æˆ‘çš„ï¼Œé¦–å…ˆå»æˆ‘æºä»£ç https://github.com/lindexi/UWPï¼Œæ‰“å¼€æˆ‘çš„è¿›åº¦æ¡æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰Viewæ–‡ä»¶å¤¹</p>

<p>æˆ‘åœ¨Viewæœ‰ä¸€ä¸ªæ§ä»¶<code class="language-plaintext highlighter-rouge">RountProgress</code>å¤åˆ¶ä»–åˆ°ä½ çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚æœæˆ‘çš„æ§ä»¶å¤§å°å’Œä½ ä¸ä¸€æ ·ï¼Œå¾ˆç®€å•è°ƒæ•´ï¼Œæˆ‘å°±ä¸è¯´ã€‚</p>

<p>é‚£ä¹ˆæˆ‘çš„æ§ä»¶åªéœ€è¦æŒ‡å®šValueå°±å¥½å•¦ï¼ŒValueå…¶å®æ˜¯ä»0åˆ°100ï¼Œå¦‚æœå«åˆ«çš„åº”è¯¥å¥½ï¼Œä½†æ˜¯æˆ‘ä¸æ”¹ï¼Œå¦‚æœä½ è§‰å¾—ä¸æƒ³è¦ï¼Œè‡ªå·±æ”¹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   xmlns:view="using:lindexi.uwp.control.RountProgress.View"
     &lt;view:RountProgress Value="{x:Bind Value,Mode=OneWay}"&gt;&lt;/view:RountProgress&gt;

</code></pre></div></div>

<p><img src="http://img.blog.csdn.net/20160810164207135" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p>

<p>æˆ‘æ¥è¯´ä¸‹æ€ä¹ˆåš</p>

<p>æˆ‘ä»¬è¦çŸ¥é“StrokeDashArrayï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ˜¯å¾ªç¯çš„ï¼Œä¹Ÿå°±æ˜¯ä¾æ­¤è¯»å–ï¼ŒçŸ¥é“è¶…è¿‡é•¿åº¦ã€‚</p>

<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æœ‰Thicknessï¼Œå®½åº¦ï¼ŒStrokeDashArrayçš„æ¯ä¸€ä¸ªéƒ½æ˜¯å®½åº¦çš„å€æ•°</p>

<p>é¦–å…ˆå–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒæŠŠè¿™ä¸ªå…ƒç´ ä¹˜ä»¥å®½åº¦ï¼Œä½œä¸ºæ˜¾ç¤ºçš„å¤§å°ï¼Œç„¶åå–ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¹˜ä»¥å®½åº¦ï¼Œä½œä¸ºä¸æ˜¾ç¤ºçš„å¤§å°</p>

<p>ç„¶åå¾ªç¯è·å–ç¬¬ä¸‰ä¸ªâ€¦â€¦ï¼Œå¦‚æœä¸å­˜åœ¨ç¬¬ä¸‰ä¸ªï¼Œé‚£ä¹ˆå¾ªç¯æ‹¿ç¬¬ä¸€åšç¬¬ä¸‰ï¼Œn=n==max?0:n+1ï¼Œnå°±æ˜¯ç¬¬nä¸ªå…ƒç´ </p>

<p>ä¸€ä¸ªæ˜¾ç¤ºä¸€ä¸ªä¸æ˜¾ç¤ºï¼Œå¾ªç¯</p>

<p>è®°å¾—é•¿åº¦ä¹˜ä»¥æ˜¯<code class="language-plaintext highlighter-rouge">å€¼*å®½åº¦</code></p>

<p>é‚£ä¹ˆæˆ‘ä»¬å¦‚æœæœ‰ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">å€¼*å®½åº¦</code>çš„åˆ°å¤§å°æ¯”æˆ‘ä»¬çš„å®½åº¦è¿˜å¤§ï¼Œé‚£ä¹ˆå°±ä¼šæˆªæ–­ã€‚</p>

<p>å‡å¦‚æˆ‘ä»¬å®½åº¦ 3ï¼ŒStrokeDashArray 1,2,0.5ï¼Œæ€»é•¿åº¦ä¸º5ï¼Œé‚£ä¹ˆ</p>

<p>ç¬¬ä¸€ä¸ªæ˜¯å¤§å° <code class="language-plaintext highlighter-rouge">1*3</code>æ˜¾ç¤ºï¼Œç„¶åæ˜¯<code class="language-plaintext highlighter-rouge">2*3</code>ä¸æ˜¾ç¤ºï¼Œå› ä¸ºåˆ°ç¬¬ä¸€ä¸ªåªæœ‰é•¿åº¦ä¸º2ï¼Œç¬¬äºŒä¸ªå¤§å°ä¸º6ï¼Œæ‰€ä»¥ä¼šæˆªæ–­ï¼Œ3æ˜¾ç¤ºç„¶å2ä¸æ˜¾ç¤º</p>

<p>æˆ‘ä»¬å¯ä»¥ç”¨ç¬¬ä¸€ä¸ªä¸ºä¸€ä¸ªå€¼ï¼Œç„¶åç¬¬äºŒä¸ªä¸ºä¸€ä¸ªæ¯”æ€»é•¿åº¦è¿˜å¤§çš„å€¼ï¼Œè¿™æ ·ä¼šè®©å®½åº¦æ˜¾ç¤ºä¸ºæˆ‘ä»¬ç¬¬ä¸€ä¸ªçš„å€¼ï¼Œè€Œå…¶ä»–ä¸ºç©ºï¼Œå› ä¸ºç¬¬äºŒä¸ªæ¯”æœ€å¤§è¿˜å¤§</p>

<p>æˆ‘ä»¬è¦åšä¸€ä¸ª<code class="language-plaintext highlighter-rouge">30%</code>ï¼Œæˆ‘ä»¬éœ€è¦ç®—</p>

<p><code class="language-plaintext highlighter-rouge">é•¿=åœ†*30%/å®½åº¦</code></p>

<p><code class="language-plaintext highlighter-rouge">åœ†=PI*(æ€»é•¿åº¦-å®½åº¦)</code></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
         <span class="nt">&lt;Ellipse</span> <span class="na">x:Name=</span><span class="s">"Rount"</span> <span class="na">Stroke=</span><span class="s">"DeepSkyBlue"</span> <span class="na">Height=</span><span class="s">"100"</span> <span class="na">Width=</span><span class="s">"100"</span> 

                 <span class="na">StrokeThickness=</span><span class="s">"3"</span> 

                 <span class="na">RenderTransformOrigin=</span><span class="s">"0.5,0.5"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>é‚£ä¹ˆæˆ‘ä»¬ç¬¬ä¸€ä¸ªå€¼ <code class="language-plaintext highlighter-rouge">(æ€»é•¿åº¦100 - å®½åº¦3) \* PI / å®½åº¦3</code></p>

<p>å› ä¸ºæˆ‘ä»¬éœ€è¦ç®—æˆ‘ä»¬çš„å®½åº¦ä¸æ˜¯ç›´æ¥æ€»é•¿åº¦ï¼Œæ˜¯æ€»é•¿åº¦-å®½åº¦</p>

<p>ç¬¬äºŒä¸ªæœ€å¥½æ˜¯Double.Max</p>

<p>æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå¯ä»¥ç”¨æˆ·è¿›åº¦ï¼Œé‚£ä¹ˆå¯ä»¥ç»‘å®šä¸€ä¸ªå±æ€§ï¼Œåœ¨æˆ‘ä»¬æ§ä»¶</p>

<p>æˆ‘ä»¬éœ€è¦è¿™ä¸ªä¸º<code class="language-plaintext highlighter-rouge">double</code>ï¼Œç„¶åç»‘å®š</p>

<p>å› ä¸ºæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå€¼ï¼Œæ‰€ä»¥è½¬æ¢</p>

<p>å‡å¦‚æˆ‘ä»¬çš„è½¬æ¢æ˜¯å›ºå®šçš„æ€»é•¿åº¦ï¼Œå®½åº¦ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
        <span class="k">public</span> <span class="kt">object</span> <span class="nf">Convert</span><span class="p">(</span><span class="kt">object</span> <span class="k">value</span><span class="p">,</span> <span class="n">Type</span> <span class="n">targetType</span><span class="p">,</span> <span class="kt">object</span> <span class="n">parameter</span><span class="p">,</span> <span class="kt">string</span> <span class="n">language</span><span class="p">)</span>

        <span class="p">{</span>

            <span class="kt">double</span> <span class="n">thine</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span>

            <span class="kt">double</span> <span class="n">w</span> <span class="p">=</span> <span class="m">100</span> <span class="p">-</span> <span class="n">thine</span><span class="p">;</span>

            <span class="kt">double</span> <span class="n">n</span> <span class="p">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">PI</span> <span class="p">*</span> <span class="n">w</span><span class="p">/</span><span class="n">thine</span> <span class="p">*</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="k">value</span> <span class="p">/</span> <span class="m">100</span><span class="p">;</span>

            <span class="n">DoubleCollection</span> <span class="n">temp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DoubleCollection</span><span class="p">()</span>

            <span class="p">{</span>

               <span class="n">n</span><span class="p">,</span>

                <span class="m">1000</span>

            <span class="p">};</span>

            <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>

        <span class="p">}</span>

</code></pre></div></div>

<p>å¦‚æœè§‰å¾—å›ºå®šä¸å¥½ï¼Œå¯ä»¥åœ¨æˆ‘ä»¬è½¬æ¢å†™å±æ€§ï¼Œç„¶ååœ¨ç•Œé¢æŠŠæˆ‘ä»¬çš„å®½åº¦ç»™å±æ€§ï¼Œç„¶åæ¢ä¸ºæˆ‘ä»¬çš„å®½åº¦ç®—ï¼Œè¿™ä¸ªç®€å•</p>

<p>ä»£ç åœ¨https://github.com/lindexi/UWP/tree/master/uwp/control/Progress/Progress/View/RountProgress.xaml</p>

<p>é‚£ä¹ˆè¿›åº¦æ¡å¦‚æœä¸éœ€è¦è¿›åº¦ï¼Œé‚£ä¹ˆæˆ‘æœ‰ä¸€äº›å¥½çš„ï¼Œä¾‹å¦‚æˆ‘ä¹‹å‰çš„åšå®¢æœ‰è¯´çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªç®€å•ï¼Œä¹Ÿæ˜¯ä¸Šé¢æ”¹ï¼Œæˆ‘ä»¬ä¸€ä¸ªå€¼æ˜¯æ˜¾ç¤ºä¸€ä¸ªå€¼æ˜¯ä¸æ˜¾ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åš</p>

<p><img src="http://img.blog.csdn.net/20160810190545145" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;UserControl</span>

    <span class="na">x:Class=</span><span class="s">"lindexi.uwp.control.RountProgress.View.IndeterminateProgress"</span>

    <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>

    <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>

    <span class="na">xmlns:local=</span><span class="s">"using:lindexi.uwp.control.RountProgress.View"</span>

    <span class="na">xmlns:d=</span><span class="s">"http://schemas.microsoft.com/expression/blend/2008"</span>

    <span class="na">xmlns:mc=</span><span class="s">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>

    <span class="na">mc:Ignorable=</span><span class="s">"d"</span>

    <span class="na">d:DesignHeight=</span><span class="s">"300"</span>

    <span class="na">d:DesignWidth=</span><span class="s">"400"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;UserControl.Resources&gt;</span>

        <span class="nt">&lt;Style</span> <span class="na">TargetType=</span><span class="s">"ProgressRing"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"Background"</span> <span class="na">Value=</span><span class="s">"Transparent"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"Foreground"</span> <span class="na">Value=</span><span class="s">"{ThemeResource SystemControlHighlightAccentBrush}"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"IsHitTestVisible"</span> <span class="na">Value=</span><span class="s">"False"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"HorizontalAlignment"</span> <span class="na">Value=</span><span class="s">"Center"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"VerticalAlignment"</span> <span class="na">Value=</span><span class="s">"Center"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"MinHeight"</span> <span class="na">Value=</span><span class="s">"20"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"MinWidth"</span> <span class="na">Value=</span><span class="s">"20"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"IsTabStop"</span> <span class="na">Value=</span><span class="s">"False"</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"Template"</span><span class="nt">&gt;</span>

                <span class="nt">&lt;Setter.Value&gt;</span>

                    <span class="nt">&lt;ControlTemplate</span> <span class="na">TargetType=</span><span class="s">"ProgressRing"</span><span class="nt">&gt;</span>

                        <span class="nt">&lt;Grid</span> <span class="na">x:Name=</span><span class="s">"Ring"</span> <span class="na">BorderBrush=</span><span class="s">"{TemplateBinding BorderBrush}"</span> <span class="na">BorderThickness=</span><span class="s">"{TemplateBinding BorderThickness}"</span> <span class="na">Background=</span><span class="s">"{TemplateBinding Background}"</span> <span class="na">FlowDirection=</span><span class="s">"LeftToRight"</span> <span class="na">MaxWidth=</span><span class="s">"{Binding TemplateSettings.MaxSideLength, RelativeSource={RelativeSource Mode=TemplatedParent}}"</span> <span class="na">MaxHeight=</span><span class="s">"{Binding TemplateSettings.MaxSideLength, RelativeSource={RelativeSource Mode=TemplatedParent}}"</span> <span class="na">Padding=</span><span class="s">"{TemplateBinding Padding}"</span> <span class="na">RenderTransformOrigin=</span><span class="s">".5,.5"</span> <span class="nt">&gt;</span>

                            <span class="nt">&lt;Grid.Resources&gt;</span>

                                <span class="nt">&lt;Style</span> <span class="na">x:Key=</span><span class="s">"ProgressRingEllipseStyle"</span> <span class="na">TargetType=</span><span class="s">"Ellipse"</span><span class="nt">&gt;</span>

                                    <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"Opacity"</span> <span class="na">Value=</span><span class="s">"0"</span><span class="nt">/&gt;</span>

                                    <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"HorizontalAlignment"</span> <span class="na">Value=</span><span class="s">"Left"</span><span class="nt">/&gt;</span>

                                    <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"VerticalAlignment"</span> <span class="na">Value=</span><span class="s">"Top"</span><span class="nt">/&gt;</span>

                                <span class="nt">&lt;/Style&gt;</span>

                            <span class="nt">&lt;/Grid.Resources&gt;</span>

                            <span class="nt">&lt;VisualStateManager.VisualStateGroups&gt;</span>

                                <span class="nt">&lt;VisualStateGroup</span> <span class="na">x:Name=</span><span class="s">"SizeStates"</span><span class="nt">&gt;</span>

                                    <span class="nt">&lt;VisualState</span> <span class="na">x:Name=</span><span class="s">"Large"</span><span class="nt">&gt;</span>

                                        <span class="nt">&lt;Storyboard&gt;</span>

                                      

                                        <span class="nt">&lt;/Storyboard&gt;</span>

                                    <span class="nt">&lt;/VisualState&gt;</span>

                                    <span class="nt">&lt;VisualState</span> <span class="na">x:Name=</span><span class="s">"Small"</span><span class="nt">/&gt;</span>

                                <span class="nt">&lt;/VisualStateGroup&gt;</span>

                                <span class="nt">&lt;VisualStateGroup</span> <span class="na">x:Name=</span><span class="s">"ActiveStates"</span><span class="nt">&gt;</span>

                                    <span class="nt">&lt;VisualState</span> <span class="na">x:Name=</span><span class="s">"Inactive"</span><span class="nt">/&gt;</span>

                                    <span class="nt">&lt;VisualState</span> <span class="na">x:Name=</span><span class="s">"Active"</span><span class="nt">&gt;</span>

                                        <span class="nt">&lt;Storyboard</span> <span class="na">RepeatBehavior=</span><span class="s">"Forever"</span><span class="nt">&gt;</span>

                                            <span class="nt">&lt;DoubleAnimation</span> <span class="na">Storyboard.TargetName=</span><span class="s">"Rount"</span> <span class="na">Storyboard.TargetProperty=</span><span class="s">"Angle"</span>

                                                           <span class="na">BeginTime=</span><span class="s">"0:0:0"</span> <span class="na">Duration=</span><span class="s">"0:0:5"</span> <span class="na">From=</span><span class="s">"0"</span> <span class="na">To=</span><span class="s">"360"</span>  <span class="nt">&gt;</span>

                                            <span class="nt">&lt;/DoubleAnimation&gt;</span>

                                            

                                        <span class="nt">&lt;/Storyboard&gt;</span>

                                    <span class="nt">&lt;/VisualState&gt;</span>

                                <span class="nt">&lt;/VisualStateGroup&gt;</span>

                            <span class="nt">&lt;/VisualStateManager.VisualStateGroups&gt;</span>

                           

                            <span class="nt">&lt;Ellipse</span>  <span class="na">Stroke=</span><span class="s">"DeepSkyBlue"</span> <span class="na">Height=</span><span class="s">"100"</span> <span class="na">Width=</span><span class="s">"100"</span> 

                                      <span class="na">StrokeThickness=</span><span class="s">"3"</span>  

                                      <span class="na">RenderTransformOrigin=</span><span class="s">"0.5,0.5"</span><span class="nt">/&gt;</span>

                            <span class="nt">&lt;Ellipse</span>  <span class="na">Stroke=</span><span class="s">"DeepSkyBlue"</span> <span class="na">Height=</span><span class="s">"200"</span> <span class="na">Width=</span><span class="s">"200"</span> 

                                      <span class="na">StrokeThickness=</span><span class="s">"3"</span> <span class="na">StrokeDashArray=</span><span class="s">"50 50"</span> 

                                      <span class="na">RenderTransformOrigin=</span><span class="s">"0.5,0.5"</span> <span class="nt">&gt;</span>

                                <span class="nt">&lt;Ellipse.RenderTransform&gt;</span>

                                    <span class="nt">&lt;RotateTransform</span>  <span class="na">x:Name=</span><span class="s">"Rount"</span> <span class="na">Angle=</span><span class="s">"0"</span><span class="nt">/&gt;</span>

                                <span class="nt">&lt;/Ellipse.RenderTransform&gt;</span>

                            <span class="nt">&lt;/Ellipse&gt;</span>

                        <span class="nt">&lt;/Grid&gt;</span>

                    <span class="nt">&lt;/ControlTemplate&gt;</span>

                <span class="nt">&lt;/Setter.Value&gt;</span>

            <span class="nt">&lt;/Setter&gt;</span>

        <span class="nt">&lt;/Style&gt;</span>

    <span class="nt">&lt;/UserControl.Resources&gt;</span>

    <span class="nt">&lt;Grid&gt;</span>

        <span class="nt">&lt;ProgressRing</span> <span class="na">Width=</span><span class="s">"200"</span> <span class="na">Height=</span><span class="s">"200"</span> 

                      <span class="na">IsActive=</span><span class="s">"True"</span><span class="nt">&gt;&lt;/ProgressRing&gt;</span>

    <span class="nt">&lt;/Grid&gt;</span>

<span class="nt">&lt;/UserControl&gt;</span>

</code></pre></div></div>

<p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">&lt;RotateTransform  x:Name="Rount" Angle="0"/&gt;</code></p>

<p>æˆ‘ä»¬ä½¿ç”¨</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
                                    <span class="nt">&lt;VisualState</span> <span class="na">x:Name=</span><span class="s">"Active"</span><span class="nt">&gt;</span>

                                        <span class="nt">&lt;Storyboard</span> <span class="na">RepeatBehavior=</span><span class="s">"Forever"</span><span class="nt">&gt;</span>

                                            <span class="nt">&lt;DoubleAnimation</span> <span class="na">Storyboard.TargetName=</span><span class="s">"Rount"</span> <span class="na">Storyboard.TargetProperty=</span><span class="s">"Angle"</span>

                                                             <span class="na">Duration=</span><span class="s">"0:0:5"</span> <span class="na">From=</span><span class="s">"0"</span> <span class="na">To=</span><span class="s">"360"</span>  <span class="nt">&gt;</span>

                                            <span class="nt">&lt;/DoubleAnimation&gt;</span>

                                            

                                        <span class="nt">&lt;/Storyboard&gt;</span>

                                    <span class="nt">&lt;/VisualState&gt;</span>

</code></pre></div></div>

<p>ä¿®æ”¹æˆ‘ä»¬æ—‹è½¬ï¼Œæ—¶é—´0:0:5ï¼Œ5ç§’ï¼Œä»0åˆ°360ï¼Œå¾ªç¯</p>

<p>å› ä¸ºæ˜¯ä¿®æ”¹ï¼Œæ‰€ä»¥å¯ä»¥æ”¾åœ¨Resource</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;ProgressRing</span> <span class="na">Width=</span><span class="s">"200"</span> <span class="na">Height=</span><span class="s">"200"</span> 

                      <span class="na">IsActive=</span><span class="s">"True"</span><span class="nt">&gt;&lt;/ProgressRing&gt;</span>

</code></pre></div></div>

<p>æˆ‘è§‰å¾—åŒ€é€Ÿä¸å¥½ï¼Œä¿®æ”¹é€Ÿåº¦</p>

<ul>
  <li>BackEase</li>
</ul>

<p>ç¼“åŠ¨å‡½æ•°ï¼Œå®ƒåœ¨éƒ¨åˆ†æŒç»­æ—¶é—´å†…å‘åæ–¹å‘æ›´æ”¹ä¸»å‡½æ•°çš„å€¼</p>

<ul>
  <li>BounceEase</li>
</ul>

<p>å¼¹è·³</p>

<ul>
  <li>
    <p>CircleEase</p>

    <p>åŠ é€Ÿ</p>
  </li>
  <li>
    <p>PowerEase</p>

    <p>æ¬¡æ–¹</p>
  </li>
  <li>
    <p>SineEase</p>

    <p>sinåŠ é€Ÿ</p>
  </li>
  <li>
    <p>QuadraticEase</p>

    <p><code class="language-plaintext highlighter-rouge">^2</code></p>
  </li>
</ul>

<p>## åŠ¨ç”»</p>

<p>ç§»åŠ¨å…ƒç´ </p>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„å…ƒç´ ä½ç½®å¯ä»¥ä¿®æ”¹ Marginï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨åŠ¨ç”»ä¿®æ”¹Margin</p>

<p>UWP åŠ¨ç”» Marginå¯ä»¥</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="nt">&lt;Storyboard</span> <span class="na">TargetName=</span><span class="s">"Rount"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;ObjectAnimationUsingKeyFrames</span> <span class="na">Storyboard.TargetProperty=</span><span class="s">"Margin"</span>

                                   <span class="na">BeginTime=</span><span class="s">"00:00:00"</span> <span class="na">EnableDependentAnimation=</span><span class="s">"True"</span>

                                   <span class="na">Duration=</span><span class="s">"0:0:2"</span> <span class="nt">&gt;</span>

                 <span class="nt">&lt;DiscreteObjectKeyFrame</span> <span class="na">KeyTime=</span><span class="s">"00:00:00"</span>  <span class="nt">&gt;</span>

                     <span class="nt">&lt;DiscreteObjectKeyFrame.Value</span> <span class="nt">&gt;</span>

                         <span class="nt">&lt;Thickness&gt;</span>10,1,10,10<span class="nt">&lt;/Thickness&gt;</span>

                     <span class="nt">&lt;/DiscreteObjectKeyFrame.Value&gt;</span>

                   <span class="nt">&lt;/DiscreteObjectKeyFrame&gt;</span>

                 <span class="nt">&lt;DiscreteObjectKeyFrame</span> <span class="na">KeyTime=</span><span class="s">"00:00:02"</span><span class="nt">&gt;</span>

                     <span class="nt">&lt;DiscreteObjectKeyFrame.Value</span> <span class="nt">&gt;</span>

                         <span class="nt">&lt;Thickness&gt;</span>10,200,10,10<span class="nt">&lt;/Thickness&gt;</span>

                 <span class="nt">&lt;/DiscreteObjectKeyFrame.Value&gt;</span>

         <span class="nt">&lt;/DiscreteObjectKeyFrame&gt;</span>

    <span class="nt">&lt;/ObjectAnimationUsingKeyFrames&gt;</span>

 <span class="nt">&lt;/Storyboard&gt;</span>

</code></pre></div></div>

<p>Rountå°±æ˜¯æˆ‘ä»¬è¦ä¿®æ”¹çš„æ§ä»¶ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™æ˜¯åœ¨2å°±ç›´æ¥ä¿®æ”¹ï¼Œæ²¡æœ‰ä»1åˆ°200ï¼Œè¿™æ ·å…¶å®å¹¶ä¸æ˜¯æˆ‘ä»¬ç›´æ¥å°±æƒ³ä»1ç„¶åä¸¤ç§’200</p>

<p>æˆ‘ä»¬å®šä¹‰</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                            &lt;local:IndeterminateProgress  Margin="0,10,0,0" Width="200" Height="200" &gt;

                                &lt;local:IndeterminateProgress.RenderTransform&gt;

                                    &lt;TranslateTransform x:Name="Rount" Y="0"&gt;&lt;/TranslateTransform&gt;

                                &lt;/local:IndeterminateProgress.RenderTransform&gt;

                            &lt;/local:IndeterminateProgress&gt;
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 &lt;DoubleAnimation Storyboard.TargetName="Rount" Storyboard.TargetProperty="Y"

        From="0" To="100" Duration="0:0:2"&gt;&lt;/DoubleAnimation&gt;

</code></pre></div></div>

<p>æˆ‘ä»¬è¦è®©æˆ‘ä»¬çš„è¿›åº¦å¼¹èµ·æ¥ï¼Œå¦‚æœä¸çŸ¥é“æˆ‘è¯´ä»€ä¹ˆï¼Œç®€å•æˆ‘æœ‰å›¾</p>

<p><img src="http://img.blog.csdn.net/20160815151046014" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p>

<p>å…¶å®æˆ‘ä»¬è¦è®©æˆ‘ä»¬çš„å…ƒç´ ç§»åŠ¨ï¼Œå¯ä»¥çœ‹æ—æ”¿å¤§ç¥çš„ä¹¦</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 

    <span class="nt">&lt;local:IndeterminateProgress</span> <span class="na">Margin=</span><span class="s">"0,10,0,0"</span> <span class="na">Width=</span><span class="s">"200"</span> <span class="na">Height=</span><span class="s">"200"</span> <span class="nt">&gt;</span>

       <span class="nt">&lt;local:IndeterminateProgress.RenderTransform&gt;</span>

               <span class="nt">&lt;TranslateTransform</span> <span class="na">x:Name=</span><span class="s">"Rount"</span> <span class="na">Y=</span><span class="s">"10"</span> <span class="nt">/&gt;</span>

       <span class="nt">&lt;/local:IndeterminateProgress.RenderTransform&gt;</span>

    <span class="nt">&lt;/local:IndeterminateProgress&gt;</span>

</code></pre></div></div>

<p>åœ¨åŠ¨ç”»</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
                                              <span class="nt">&lt;DoubleAnimation</span> <span class="na">Storyboard.TargetName=</span><span class="s">"Rount"</span>

                                                             <span class="na">Storyboard.TargetProperty=</span><span class="s">"Y"</span>

                                                             <span class="na">Duration=</span><span class="s">"0:0:2"</span> <span class="na">From=</span><span class="s">"0"</span> <span class="na">To=</span><span class="s">"300"</span><span class="nt">&gt;</span>

                                                <span class="nt">&lt;DoubleAnimation.EasingFunction&gt;</span>

                                                    <span class="nt">&lt;BounceEase</span> <span class="na">Bounces=</span><span class="s">"2"</span><span class="nt">&gt;&lt;/BounceEase&gt;</span>

                                                <span class="nt">&lt;/DoubleAnimation.EasingFunction&gt;</span>

                                            <span class="nt">&lt;/DoubleAnimation&gt;</span>

</code></pre></div></div>

<p>æˆ‘ä»¬ä½¿ç”¨Rountï¼Œxï¼Œè®°å¾—è¦ç»™åå­—ï¼Œç„¶åä¸¤ç§’ï¼Œä»0åˆ°300ï¼Œä¸‹é¢å°±æ˜¯å¼¹è·³ï¼Œæˆ‘ä¸Šé¢æœ‰è¯´ï¼Œè¿™ä¸ªåœ¨å®˜æ–¹æœ‰è¯´æ¯”æˆ‘å†™è¿˜å¥½ï¼Œä½†æ˜¯å®˜æ–¹çš„æˆ‘æ²¡æ³•æ‹¿æ¥</p>

:ET