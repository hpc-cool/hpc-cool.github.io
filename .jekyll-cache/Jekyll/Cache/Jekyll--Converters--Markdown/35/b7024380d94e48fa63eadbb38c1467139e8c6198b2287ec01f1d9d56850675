I"¤V<p>å¾ˆå¤šæ—¶å€™ä¸€äº›ç®€å•çš„ä½¿ç”¨ç»‘å®šéœ€è¦å¯¹ç»‘å®šçš„æºåšå¤„ç†å°±éœ€è¦é€šè¿‡è½¬æ¢å™¨ï¼Œè¿™æ ·çš„ä»£ç å†™èµ·æ¥ä¸å¥½çœ‹
æœ¬æ–‡å‘Šè¯‰å¤§å®¶é€šè¿‡ä¸€ä¸ªç®€å•çš„åº“å¯ä»¥å®ç°åœ¨ç•Œé¢ç»‘å®šçš„æ—¶å€™é€šè¿‡è¡¨è¾¾å¼ä¸éœ€è¦è½¬æ¢</p>

<!--more-->

<!-- CreateTime:2018/12/22 16:12:56 -->

<!-- csdn -->

<p>é¦–å…ˆé€šè¿‡ Nuget å®‰è£… CalcBinding åº“ï¼Œæ³¨æ„ Nuget çš„åœ°å€æ˜¯ <a href="https://api.nuget.org/v3/index.json">https://api.nuget.org/v3/index.json</a> å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªåº“å°±è¯·å¤åˆ¶é“¾æ¥ç‚¹å‡»æ›´æ–°ï¼Œå†è¾“å…¥ <code class="language-plaintext highlighter-rouge">CalcBinding</code> å¯»æ‰¾</p>

<!-- ![](image/WPF åœ¨ç»‘å®šè¡¨è¾¾å¼æ·»åŠ è®¡ç®—/WPF åœ¨ç»‘å®šè¡¨è¾¾å¼æ·»åŠ è®¡ç®—0.png) -->

<p><img src="http://image.acmx.xyz/lindexi%2F201812221544983" alt="" /></p>

<p>åœ¨ä½¿ç”¨è¿™ä¸ªåº“ä¹‹å‰éœ€è¦å¼•ç”¨å‘½åç©ºé—´ï¼Œæ‰“å¼€ MainWindow.xaml æ–‡ä»¶ï¼Œæ·»åŠ å‘½åç©ºé—´</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">xmlns</span><span class="p">:</span><span class="n">c</span><span class="p">=</span><span class="s">"clr-namespace:CalcBinding;assembly=CalcBinding"</span>
</code></pre></div></div>

<p>ç„¶ååˆ›å»ºä¸€ä¸ªæ•°æ®ç”¨æ¥ç»‘å®š</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">ViewModel</span> <span class="p">:</span> <span class="n">INotifyPropertyChanged</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">double</span> <span class="n">A</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">_a</span><span class="p">;</span>
            <span class="k">set</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">value</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">_a</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
                <span class="n">_a</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
                <span class="nf">OnPropertyChanged</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">double</span> <span class="n">B</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">_b</span><span class="p">;</span>
            <span class="k">set</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">value</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">_b</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
                <span class="n">_b</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
                <span class="nf">OnPropertyChanged</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">double</span> <span class="n">C</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">_c</span><span class="p">;</span>
            <span class="k">set</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">value</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">_c</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
                <span class="n">_c</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
                <span class="nf">OnPropertyChanged</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">event</span> <span class="n">PropertyChangedEventHandler</span> <span class="n">PropertyChanged</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">double</span> <span class="n">_a</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">double</span> <span class="n">_b</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">double</span> <span class="n">_c</span><span class="p">;</span>

        <span class="p">[</span><span class="n">NotifyPropertyChangedInvocator</span><span class="p">]</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">OnPropertyChanged</span><span class="p">([</span><span class="n">CallerMemberName</span><span class="p">]</span> <span class="kt">string</span> <span class="n">propertyName</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">PropertyChanged</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">new</span> <span class="nf">PropertyChangedEventArgs</span><span class="p">(</span><span class="n">propertyName</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

</code></pre></div></div>

<p>è¿™æ—¶åœ¨ç•Œé¢å¦‚æœéœ€è¦åˆ›å»ºä¸€ä¸ª TextBlock ç»‘å®šä¸‰ä¸ªå€¼ A + B + C å°±å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">"{c:Binding A+B+C}"</span> <span class="na">HorizontalAlignment=</span><span class="s">"Center"</span> <span class="na">VerticalAlignment=</span><span class="s">"Center"</span><span class="nt">&gt;&lt;/TextBlock&gt;</span>

</code></pre></div></div>

<p>é€šè¿‡ç›´æ¥å†™è¡¨è¾¾å¼çš„æ–¹å¼å°±å¯ä»¥ï¼Œååˆ†ç®€å•</p>

<p>é‚£å¦‚æœéœ€è¦åŠ ä¸Šä¸€äº›å¸¸é‡æ€ä¹ˆåšï¼Œå¦‚è®¡ç®— <code class="language-plaintext highlighter-rouge">0.5*A+B</code> å¯ä»¥æ€ä¹ˆå†™ï¼Ÿ</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">"{c:Binding 0.5*A+B}"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>ä¿®æ”¹ä¸€ä¸‹ç•Œé¢ç„¶åè¿è¡Œ</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="nt">&lt;StackPanel&gt;</span>
                <span class="nt">&lt;TextBlock&gt;</span>
                    <span class="nt">&lt;Run</span> <span class="na">Text=</span><span class="s">"A="</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;Run</span> <span class="na">Text=</span><span class="s">"{Binding A}"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/TextBlock&gt;</span>
                <span class="nt">&lt;TextBlock&gt;</span>
                    <span class="nt">&lt;Run</span> <span class="na">Text=</span><span class="s">"B="</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;Run</span> <span class="na">Text=</span><span class="s">"{Binding B}"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/TextBlock&gt;</span>
                <span class="nt">&lt;TextBlock&gt;</span>
                    <span class="nt">&lt;Run</span> <span class="na">Text=</span><span class="s">"C="</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;Run</span> <span class="na">Text=</span><span class="s">"{Binding C}"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/TextBlock&gt;</span>
                <span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">"0.5*A+B"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">"{c:Binding 0.5*A+B}"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/StackPanel&gt;</span>
</code></pre></div></div>

<!-- ![](image/WPF åœ¨ç»‘å®šè¡¨è¾¾å¼æ·»åŠ è®¡ç®—/WPF åœ¨ç»‘å®šè¡¨è¾¾å¼æ·»åŠ è®¡ç®—1.png) -->

<p><img src="http://image.acmx.xyz/lindexi%2F20181222155732456" alt="" /></p>

<p>å¦‚æœæ­¤æ—¶çš„è¿˜æœ‰ä¸€äº›å¸ƒå°”é‡æ€ä¹ˆåŠï¼Ÿæ‰“å¼€ ViewModel ç±»æ·»åŠ ä¸‹é¢ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">public</span> <span class="kt">bool</span> <span class="n">BoolA</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">_boolA</span><span class="p">;</span>
            <span class="k">set</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">value</span> <span class="p">==</span> <span class="n">_boolA</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                <span class="n">_boolA</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
                <span class="nf">OnPropertyChanged</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">bool</span> <span class="n">BoolB</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">_boolB</span><span class="p">;</span>
            <span class="k">set</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">value</span> <span class="p">==</span> <span class="n">_boolB</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                <span class="n">_boolB</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
                <span class="nf">OnPropertyChanged</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="kt">bool</span> <span class="n">_boolB</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">bool</span> <span class="n">_boolA</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>å¦‚æœéœ€è¦ç»‘å®š A å’Œ B å¯ä»¥è¿™æ ·å†™</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;TextBlock Text="{c:Binding BoolA and BoolB}" /&gt;
&lt;TextBlock Text="{c:Binding BoolA or BoolB}" /&gt;
&lt;TextBlock Text="{c:Binding BoolA and BoolB or BoolB}" /&gt;
</code></pre></div></div>

<p>ä¿®æ”¹ä¸€ä¸‹ç•Œé¢</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            &lt;StackPanel&gt;
                &lt;TextBlock&gt;
                    &lt;Run Text="A=" /&gt;
                    &lt;Run Text="{Binding BoolA}" /&gt;
                &lt;/TextBlock&gt;
                &lt;TextBlock&gt;
                    &lt;Run Text="B=" /&gt;
                    &lt;Run Text="{Binding BoolB}" /&gt;
                &lt;/TextBlock&gt;
                &lt;TextBlock Text="A and B" /&gt;
                &lt;TextBlock Text="{c:Binding BoolA and BoolB}" /&gt;
                &lt;TextBlock Text="A or B" /&gt;
                &lt;TextBlock Text="{c:Binding BoolA or BoolB}" /&gt;
            &lt;/StackPanel&gt;

</code></pre></div></div>

<!-- ![](image/WPF åœ¨ç»‘å®šè¡¨è¾¾å¼æ·»åŠ è®¡ç®—/WPF åœ¨ç»‘å®šè¡¨è¾¾å¼æ·»åŠ è®¡ç®—2.png) -->

<p><img src="http://image.acmx.xyz/lindexi%2F2018122216214143" alt="" /></p>

<p>å…¶ä»–å¯ä»¥å†™çš„æ˜¯è¡¨è¾¾å¼</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding A+B+C}"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding A-B-C}"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding A*(B+C)}"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding 2*A-B*0.5}"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding A/B, StringFormat={}{0:n2} --StringFormat is used}"</span><span class="p">/&gt;</span> <span class="p">{</span><span class="n">with</span> <span class="kt">string</span> <span class="n">format</span><span class="p">}</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding A%B}"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding '(A == 1) ? 10 : 20'}"</span><span class="p">/&gt;</span> <span class="p">{</span><span class="n">ternary</span> <span class="k">operator</span><span class="p">}</span>
</code></pre></div></div>

<p>åˆ¤æ–­å¸ƒå°”</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">CheckBox</span> <span class="n">Content</span><span class="p">=</span><span class="s">"!IsChecked"</span> <span class="n">IsChecked</span><span class="p">=</span><span class="s">"{c:Binding !IsChecked}"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding 'IsChecked and IsFull'}"</span><span class="p">/&gt;</span> <span class="p">{</span><span class="err">'</span><span class="n">and</span><span class="err">'</span> <span class="k">is</span> <span class="n">equvalent</span> <span class="n">of</span> <span class="err">'</span><span class="p">&amp;&amp;</span><span class="err">'</span><span class="p">}</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding '!IsChecked or (A &gt; B)'}"</span><span class="p">/&gt;</span> <span class="p">{</span><span class="err">'</span><span class="n">or</span><span class="err">'</span> <span class="k">is</span> <span class="n">equvalent</span> <span class="n">of</span> <span class="err">'</span><span class="p">||</span><span class="err">'</span><span class="p">,</span> <span class="n">but</span> <span class="n">you</span> <span class="n">can</span> <span class="n">leave</span> <span class="err">'</span><span class="p">||</span><span class="err">'</span><span class="p">}</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding '(A == 1) and (B less= 5)'}"</span><span class="p">/&gt;</span> <span class="p">{</span><span class="err">'</span><span class="n">less</span><span class="p">=</span><span class="err">'</span> <span class="k">is</span> <span class="n">equvalent</span> <span class="n">of</span> <span class="err">'</span><span class="p">&lt;=</span><span class="err">'</span><span class="p">}</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding (IsChecked || !IsFull)}"</span><span class="p">/&gt;</span>
</code></pre></div></div>

<p>å› ä¸ºåœ¨ xaml ä¸èƒ½ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">&amp;&amp;</code> <code class="language-plaintext highlighter-rouge">||</code> <code class="language-plaintext highlighter-rouge">&lt;=</code> æ‰€ä»¥éœ€è¦ä½¿ç”¨ and or â€˜less=â€™ æ›¿æ¢</p>

<p>å¦å¤–å¯¹äº <code class="language-plaintext highlighter-rouge">:</code> ä¹‹å‰éœ€è¦æ·»åŠ ç©ºæ ¼ï¼Œå¦‚ä¸‹é¢ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding '(A == 2)?IsChecked : IsFull}"</span><span class="p">/&gt;</span> <span class="p">&lt;!--</span> <span class="n">right</span> <span class="p">--&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding '(A == 2)?IsChecked :!IsFull}"</span><span class="p">/&gt;</span> <span class="p">&lt;!--</span> <span class="n">right</span> <span class="p">--&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding '(A == 2) ? IsChecked :4 + IsFull}"</span><span class="p">/&gt;</span> <span class="p">&lt;!--</span> <span class="n">right</span> <span class="p">--&gt;</span>
</code></pre></div></div>

<p>è¿™äº›éƒ½æ˜¯å¯¹çš„ï¼Œä½†æ˜¯ä¸‹é¢çš„ä»£ç æ˜¯æ— æ³•è¿è¡Œ</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding '(A == 2)?IsChecked:IsFull}"</span><span class="p">/&gt;</span> <span class="p">&lt;!--</span> <span class="n">wrong</span> <span class="p">--&gt;</span>
</code></pre></div></div>

<p>å¯ä»¥ç»‘å®šé™æ€çš„å€¼ï¼Œé™æ€çš„å€¼çš„å†™æ³• <code class="language-plaintext highlighter-rouge">xmlNamespace:Class.StaticProperty.NestedProperty</code> å‘½åç©ºé—´ä¸‹çš„ç±»çš„é™æ€å±æ€§çš„å±æ€§</p>

<p>å¯¹äºç»å¸¸è®¡ç®—å€¼è¿™é‡Œä¹Ÿå¯ä»¥ç®€å•ä½¿ç”¨ï¼Œå¦‚ Math é‡Œé¢çš„æ–¹æ³•</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding Math.Sin(A*Math.PI/180), StringFormat={}{0:n5} }"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Text</span><span class="p">=</span><span class="s">"{c:Binding A*Math.PI}"</span> <span class="p">/&gt;</span>
</code></pre></div></div>

<p>æšä¸¾å€¼ä¹Ÿå¯ä»¥ç‚¹å‘½åç©ºé—´çš„æšä¸¾çš„å€¼ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­ <code class="language-plaintext highlighter-rouge">xmlNamespace:EnumClass.Value</code> å¦‚åœ¨ Foo æšä¸¾é‡Œé¢æœ‰ A è¿™ä¸ªå€¼</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">CheckBox</span> <span class="n">IsChecked</span><span class="p">=</span><span class="s">"{c:Binding 'Foo==local:Foo.A'}"</span> <span class="p">/&gt;</span>
</code></pre></div></div>

<p>ç»å¸¸ä¼šå°† bool è½¬æ¢ä¸º Visibility è¿™ä¸ªåº“ä¹Ÿæœ‰ç®€å•çš„æ–¹æ³•</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">Button</span> <span class="n">Content</span><span class="p">=</span><span class="s">"TargetButton"</span> <span class="n">Visibility</span><span class="p">=</span><span class="s">"{c:Binding HasPrivileges, FalseToVisibility=Collapsed}"</span><span class="p">/&gt;</span>
<span class="n">or</span> <span class="n">just</span>
<span class="p">&lt;</span><span class="n">Button</span> <span class="n">Content</span><span class="p">=</span><span class="s">"TargetButton"</span> <span class="n">Visibility</span><span class="p">=</span><span class="s">"{c:Binding !HasPrivileges}"</span><span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="n">Button</span> <span class="n">Content</span><span class="p">=</span><span class="s">"TargetButton"</span> <span class="n">Visibility</span><span class="p">=</span><span class="s">"{c:Binding !HasPrivileges, FalseToVisibility=Hidden}"</span><span class="p">/&gt;</span>
</code></pre></div></div>

<p>å¦‚æœéœ€è¦åœ¨æ ·å¼ä½¿ç”¨ï¼Œéœ€è¦é€šè¿‡ RelativeSource æ‰¾åˆ°æ–¹æ³•</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">Button</span> <span class="n">Content</span><span class="p">=</span><span class="s">"Button"</span> <span class="n">Width</span><span class="p">=</span><span class="s">"100"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">Button</span><span class="p">.</span><span class="n">Template</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="n">ControlTemplate</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">TextBox</span> <span class="n">Width</span><span class="p">=</span><span class="s">"{c:Binding Width+10, RelativeSource={RelativeSource TemplatedParent} }"</span><span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="n">ControlTemplate</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="n">Button</span><span class="p">.</span><span class="n">Template</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">Button</span><span class="p">&gt;</span> 
</code></pre></div></div>

<p><a href="https://github.com/Alex141/CalcBinding">Alex141/CalcBinding: Advanced WPF Binding which supports expressions in Path property and other features</a></p>

:ET