I"î<p>å¦‚æœæƒ³è¦åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œåœ¨è¿™ä¸ªæ•°ç»„åˆå§‹åŒ–ä¸€ä¸ªå€¼ï¼Œæœ‰å¤šå°‘ä¸åŒçš„æ–¹æ³•ï¼Ÿ
æœ¬æ–‡å‘Šè¯‰å¤§å®¶ä¸‰ä¸ªä¸åŒçš„æ–¹æ³•åˆå§‹åŒ–</p>

<!--more-->

<!-- CreateTime:2019/8/31 16:55:58 -->

<p>åœ¨å¼€å‘ä¸­ï¼Œä¼šä¸ä¼šç”¨å¾ˆå¤šçš„æ—¶é—´åœ¨å†™ä¸‹é¢çš„ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">prime</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">1000</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">prime</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++</span> <span class="p">)</span>
<span class="p">{</span>
   <span class="n">prime</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æˆ–è€…é€šè¿‡é™ä½æ€§èƒ½ä½¿ç”¨ Linq çš„æ–¹æ³•</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">prime</span> <span class="p">=</span> <span class="n">Enumerable</span><span class="p">.</span><span class="nf">Repeat</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="m">1000</span><span class="p">).</span><span class="nf">ToArray</span><span class="p">();</span>
</code></pre></div></div>

<p>ç°åœ¨å¯ä»¥ä½¿ç”¨ dotnet core 2.0 ä»¥ä¸Šçš„åŠŸèƒ½ï¼Œå¿«é€Ÿåˆå§‹åŒ–</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">data</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">1000</span><span class="p">];</span>
<span class="n">Array</span><span class="p">.</span><span class="nf">Fill</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</code></pre></div></div>

<p>é€šè¿‡ Array.Fill å¯ä»¥æ¸…çœŸå†™å‡ºåˆå§‹åŒ–çš„ä»£ç ï¼ŒåŒæ—¶æ€§èƒ½å¾ˆå¥½</p>

<p>è¿™ä¸ªæ–¹æ³•è¿˜å¯ä»¥å®šåˆ¶èŒƒå›´</p>

<!-- ![](image/dotnet core ç”¨å€¼åˆå§‹åŒ–æ•´ä¸ªæ•°ç»„/dotnet core ç”¨å€¼åˆå§‹åŒ–æ•´ä¸ªæ•°ç»„0.png) -->

<p><img src="http://image.acmx.xyz/lindexi%2F20191111995339" alt="" /></p>

<p>é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•æ˜¯å¦‚ä½•åšåˆ°é«˜æ€§èƒ½çš„ï¼Ÿ</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Fill</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span><span class="p">[]</span> <span class="n">array</span><span class="p">,</span> <span class="n">T</span> <span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">array</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowArgumentNullException</span><span class="p">(</span><span class="n">ExceptionArgument</span><span class="p">.</span><span class="n">array</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">array</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä¸Šé¢å°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„æºä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä»ä¸€ä¸ªå¾ªç¯å’Œç¬¬ä¸€ä¸ªæ–¹æ³•ç›¸åŒ</p>

<p>ç°åœ¨ dotnet core å¼€æºäº†ï¼Œæ‰€æœ‰ä»£ç éƒ½å¯ä»¥æ‰¾åˆ°</p>

<p><a href="https://blog.mzikmund.com/2019/01/cool-new-way-to-fill-array-with-a-value-in-net-core/">Cool new way to fill array with a value in .NET Core â€“ Martin Zikmund</a></p>

<p>https://github.com/dotnet/coreclr</p>

:ET