I"åN<p>çœ‹åˆ°æ ‡é¢˜çš„å°ä¼™ä¼´æ˜¯ä¸æ˜¯æƒ³çŸ¥é“ä»€ä¹ˆæ˜¯é­”æ³•ä¹¦ï¼Œå¦‚æœä½ éœ€è¦å†™ä¸€æ®µä»£ç ï¼Œè¿™æ®µä»£ç æ˜¯åœ¨åšç¥å¥‡çš„ä¸šåŠ¡ï¼Œåªæœ‰ä½ æŸ¥è¯¢åˆ°äº†é­”æ³•ä¹¦ä½ æ‰èƒ½æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶ä½ è¿˜éœ€è¦å®ç°è‡ªå·±çš„æ¥å£ï¼Œé€šè¿‡è‡ªå·±å®ç°çš„æ¥å£è°ƒç”¨æ‰èƒ½ç”¨åˆ°æœ‰è¶£çš„æ–¹æ³•</p>

<!--more-->

<!-- CreateTime:2019/8/31 16:55:58 -->

<p>åœ¨ C# é‡Œé¢æ˜¯ä¸èƒ½ç›´æ¥è®©ä¸¤ä¸ªæœ‰ç›¸åŒæ–¹æ³•çš„ä½†æ²¡æœ‰ç»§æ‰¿çš„æ¥å£ç›´æ¥è½¬æ¢ï¼Œä½†æ˜¯é€šè¿‡é€æ˜ä»£ç†å’Œåå°„å¯ä»¥åšåˆ°åœ¨ä¸åŒçš„ç¨‹åºé›†å®šä¹‰çš„ä¸¤ä¸ªæ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œé‚£ä¹ˆå°†å¯ä»¥ç”¨å¦ä¸€ä¸ªç¨‹åºé›†çš„æ¥å£è°ƒç”¨åˆ°ä¼ å…¥ç¨‹åºé›†é‡Œé¢çš„æ¥å£</p>

<p>åœ¨æœ¬æ–‡å¼€å§‹ä¹‹å‰ï¼ŒæœŸæœ›çš„è¯»è€…æ˜¯äº†è§£é€æ˜ä»£ç†çš„ï¼Œé€šè¿‡é€æ˜ä»£ç†å¯ä»¥è®©æ¯ä¸ªè°ƒç”¨æ–¹æ³•ä¹‹å‰å…ˆè°ƒç”¨é€æ˜ä»£ç†çš„æ–¹æ³•ã€‚åœ¨é€æ˜ä»£ç†çš„æ–¹æ³•å¯ä»¥çŸ¥é“ç”¨æˆ·è°ƒç”¨çš„æ˜¯å“ªä¸ªæ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥çš„å‚æ•°æ˜¯ä»€ä¹ˆ</p>

<p>å…ˆå°è£…ä¸€ä¸ªç±»ï¼Œåœ¨è¿™ä¸ªç±»é‡Œé¢æ”¾ä¸€äº›å®šä¹‰å¥½çš„å®ä¾‹ï¼Œåœ¨é€æ˜ä»£ç†æ–¹æ³•é‡Œé¢é€šè¿‡ä¼ å…¥ç”¨æˆ·è°ƒç”¨çš„æ–¹æ³•ï¼Œä½¿ç”¨åå°„è°ƒç”¨å¯¹åº”å®ä¾‹çš„æ–¹æ³•ï¼Œç„¶åå°†æ–¹æ³•è¿”å›å€¼è¿”å›</p>

<p>æ¯æ¬¡ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸€ä¸ª Guid æ‰èƒ½è·å–é€æ˜ä»£ç†ï¼Œå› ä¸ºç”¨æˆ·è·å–çš„æ˜¯é€æ˜ä»£ç†ï¼Œæ˜¯æ— æ³•ç›´æ¥æ‹¿åˆ°å¯¹åº”çš„å®ä¾‹é‡Œé¢çš„å­—æ®µï¼ŒåŒæ—¶éœ€è¦ç”¨æˆ·ä¼ å…¥è‡ªå·±å®šä¹‰çš„æ¥å£ï¼Œä¸æƒ³è®©ç”¨æˆ·è®¿é—®çš„å†…å®¹ï¼Œç”¨æˆ·æ˜¯å¾ˆéš¾çŒœåˆ°çš„</p>

<p>è¿™æ ·çš„å†™æ³•å…¶å®å°±å’Œ COM ä¸€æ ·ï¼Œä»æ–‡æ¡£æ‰¾åˆ° COM çš„ GUID ç„¶åè‡ªå·±å®šä¹‰ä¸€ä¸ªæ¥å£è·å–</p>

<p>å…ˆçœ‹æˆ‘å®šä¹‰çš„ä½¿ç”¨æ–¹æ³•</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="c1">// åœ¨ç¬¬ä¸€ä¸ªç¨‹åºé›†æ³¨å…¥äº† F1 ä»£ç </span>

            <span class="kt">var</span> <span class="n">guid</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Guid</span><span class="p">(</span><span class="s">"{97C70651-EE85-4AED-9E2F-AD73AF34CF5D}"</span><span class="p">);</span>

            <span class="n">DynamicProxy</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">guid</span><span class="p">,</span><span class="k">new</span> <span class="nf">F1</span><span class="p">());</span>

            <span class="c1">// è‡ªå·±å®ç°ä¸¤ä¸ªæ¥å£</span>
            <span class="kt">var</span> <span class="n">f2</span> <span class="p">=</span> <span class="n">DynamicProxy</span><span class="p">.</span><span class="n">GetObject</span><span class="p">&lt;</span><span class="n">IF2</span><span class="p">&gt;(</span><span class="n">guid</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="nf">GetName</span><span class="p">());</span>

            <span class="kt">var</span> <span class="n">f3</span> <span class="p">=</span> <span class="n">DynamicProxy</span><span class="p">.</span><span class="n">GetObject</span><span class="p">&lt;</span><span class="n">IF3</span><span class="p">&gt;(</span><span class="n">guid</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">f3</span><span class="p">.</span><span class="nf">GetName</span><span class="p">());</span>
</code></pre></div></div>

<p>æœŸæœ›çš„å†™æ³•æ˜¯è°ƒç”¨ DynamicProxy.Add åœ¨ä¸€ä¸ªç¨‹åºé›†ï¼Œè·å–å˜é‡åœ¨å¦ä¸€ä¸ªç¨‹åºé›†</p>

<p>è¿™é‡Œçš„ F1 å’Œæ¥å£ IF2 IF3 éƒ½æ²¡æœ‰ç»§æ‰¿å…³ç³»</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">interface</span> <span class="nc">IF3</span>
    <span class="p">{</span>
        <span class="kt">string</span> <span class="nf">GetName</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">interface</span> <span class="nc">IF2</span>
    <span class="p">{</span>
        <span class="kt">string</span> <span class="nf">GetName</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">class</span> <span class="nc">F1</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetName</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">"æ—å¾·ç†™æ˜¯é€—æ¯”"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>åªè¦ä¸¤ä¸ªæ¥å£ä¹‹é—´æœ‰å®šä¹‰ç›¸åŒçš„ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ¥å£ä¹‹é—´å°±å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”¨æˆ·è‡ªå·±å†™çš„ä»£ç ï¼Œæ˜¯å¯ä»¥åšåˆ°ä»æ–‡æ¡£é‡Œé¢æ‰¾åˆ°å…¶ä¸­éœ€è¦ä½¿ç”¨çš„å‡ ä¸ªæ–¹æ³•ï¼Œç„¶åå®šä¹‰è‡ªå·±çš„æ¥å£ï¼Œé€šè¿‡ä¸Šé¢æ–¹æ³•å°±å¯ä»¥æ‹¿åˆ°</p>

<p>è¿™ä¸ªæ–¹æ³•æ¯æ¬¡è¿”å›çš„å¯¹è±¡éƒ½ä¸ç›¸åŒï¼Œç”¨æˆ·ä¹Ÿä¸çŸ¥é“æ˜¯ä¸ç›¸åŒçš„å¯¹è±¡ï¼Œä¾‹å¦‚æˆ‘å¯ä»¥å°†ç›¸åŒçš„ä¸€ä¸ªå¯¹è±¡ä½œä¸ºä¸¤ä¸ªä¸åŒçš„ Guid ä¼ å…¥ï¼Œç„¶åå‘Šè¯‰ç”¨æˆ·ä¸¤ä¸ªä¸åŒçš„æ¥å£</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="kt">var</span> <span class="n">guid1</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Guid</span><span class="p">(</span><span class="s">"{97C70651-EE85-4AED-9E2F-AD73AF34CF5D}"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">guid2</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Guid</span><span class="p">(</span><span class="s">"{05D1936F-7121-43BA-B986-A42A56555AAE}"</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">f1</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">F1</span><span class="p">();</span>
            <span class="n">DynamicProxy</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">guid1</span><span class="p">,</span> <span class="n">f1</span><span class="p">);</span>
            <span class="n">DynamicProxy</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">guid2</span><span class="p">,</span> <span class="n">f1</span><span class="p">);</span>

            <span class="c1">// è‡ªå·±å®ç°ä¸¤ä¸ªæ¥å£</span>
            <span class="kt">var</span> <span class="n">f2</span> <span class="p">=</span> <span class="n">DynamicProxy</span><span class="p">.</span><span class="n">GetObject</span><span class="p">&lt;</span><span class="n">IF2</span><span class="p">&gt;(</span><span class="n">guid1</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="nf">GetName</span><span class="p">());</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="nf">GetName</span><span class="p">(</span><span class="k">new</span> <span class="nf">F3</span><span class="p">()));</span>

            <span class="kt">var</span> <span class="n">f3</span> <span class="p">=</span> <span class="n">DynamicProxy</span><span class="p">.</span><span class="n">GetObject</span><span class="p">&lt;</span><span class="n">IF3</span><span class="p">&gt;(</span><span class="n">guid2</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">f3</span><span class="p">.</span><span class="nf">GetName</span><span class="p">());</span>
</code></pre></div></div>

<p>å¦‚æœæ˜¯åœ¨ä¸åŒçš„ä¸šåŠ¡ä¸Šï¼Œä¼°è®¡å°ä¼™ä¼´å¾ˆéš¾çŸ¥é“å…¶å®ä½¿ç”¨çš„ f2 å’Œ f3 æ˜¯ç›¸åŒä¸€ä¸ªç±»</p>

<p>è¿™æ˜¯æˆ‘ä» VisualStudio å­¦åˆ°çš„é»‘ç§‘æŠ€ï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼å®šä¹‰ï¼Œå¯ä»¥éšè—å¾ˆå¤šç”¨æˆ·ä¸éœ€è¦äº†è§£çš„ï¼ŒåŒæ—¶å¯ä»¥éšæ„çš„å˜åŠ¨é€»è¾‘ï¼Œåªéœ€è¦ä¿æŒå­˜åœ¨å¯¹åº”çš„æ¥å£å°±å¯ä»¥</p>

<p>ä¾‹å¦‚ç°åœ¨æˆ‘é€šè¿‡ F1 ä¼ å…¥ï¼Œä½†æ˜¯æˆ‘å‘ç°å…¶ä¸­çš„æŸå‡ ä¸ª Guid è·å–çš„å¯¹åº”æ–¹æ³•æˆ‘éœ€è¦ä¿®æ”¹äº†ï¼Œäºæ˜¯æˆ‘å¯ä»¥å†åˆ›å»ºä¸€ä¸ª F2 çš„ç±»ï¼Œä¿®æ”¹åŸå› çš„ Guid çš„å€¼ã€‚è¿˜æ˜¯ä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘å‘ç°äº†é€šè¿‡ guid2 è·å–åˆ°çš„ IF3 çš„ GetName æ–¹æ³•éœ€è¦ä¿®æ”¹ã€‚ä½†æ˜¯æˆ‘ä¸èƒ½å½±å“åˆ° IF2 çš„é€»è¾‘ï¼Œäºæ˜¯æˆ‘å¯ä»¥åœ¨ä¼ å…¥çš„æ—¶å€™ä¿®æ”¹ä»£ç </p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- DynamicProxy.Add(guid2, f1);
</span><span class="gi">+ DynamicProxy.Add(guid2, new F2());
</span></code></pre></div></div>

<p>è¿™æ ·å°±å¯ä»¥åšåˆ°åŸæœ‰çš„ IF2 çš„é€»è¾‘ä¸å˜ï¼ŒåŒæ—¶ä¿®æ”¹äº†å¦ä¸€ä¸ªæ¥å£çš„æ–¹æ³•</p>

<p>è¿™é‡Œ DynamicProxy çš„ä»£ç å…¶å®å¾ˆç®€å•ï¼Œåªæ˜¯é‡å†™ Invoke æ–¹æ³•ï¼Œä»æ–¹æ³•é‡Œé¢æ‹¿åˆ°ç”¨æˆ·è°ƒç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡åå°„è°ƒç”¨å®ä¾‹çš„æ–¹æ³•</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">class</span> <span class="nc">Express</span>
        <span class="p">{</span>
            <span class="c1">/// &lt;inheritdoc /&gt;</span>
            <span class="k">public</span> <span class="nf">Express</span><span class="p">(</span><span class="n">Lazy</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">instance</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">_instance</span> <span class="p">=</span> <span class="n">instance</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">public</span> <span class="kt">object</span> <span class="n">Instance</span> <span class="p">=&gt;</span> <span class="n">_instance</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span>

            <span class="k">private</span> <span class="k">readonly</span> <span class="n">Lazy</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">_instance</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">class</span> <span class="nc">Proxy</span> <span class="p">:</span> <span class="n">RealProxy</span>
        <span class="p">{</span>
            <span class="c1">/// &lt;inheritdoc /&gt;</span>
            <span class="k">public</span> <span class="nf">Proxy</span><span class="p">(</span><span class="n">Type</span> <span class="n">classToProxy</span><span class="p">,</span> <span class="n">Express</span> <span class="n">express</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">classToProxy</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Express</span> <span class="p">=</span> <span class="n">express</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">public</span> <span class="n">Express</span> <span class="n">Express</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

            <span class="c1">/// &lt;inheritdoc /&gt;</span>
            <span class="k">public</span> <span class="k">override</span> <span class="n">IMessage</span> <span class="nf">Invoke</span><span class="p">(</span><span class="n">IMessage</span> <span class="n">msg</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">MethodCallMessageWrapper</span> <span class="n">callMessageWrapper</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MethodCallMessageWrapper</span><span class="p">((</span><span class="n">IMethodCallMessage</span><span class="p">)</span> <span class="n">msg</span><span class="p">);</span>
                <span class="n">MethodInfo</span> <span class="n">methodBase</span> <span class="p">=</span> <span class="n">callMessageWrapper</span><span class="p">.</span><span class="n">MethodBase</span> <span class="k">as</span> <span class="n">MethodInfo</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">methodBase</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                    <span class="k">return</span> <span class="k">null</span><span class="p">;</span>

                <span class="kt">var</span> <span class="n">instance</span> <span class="p">=</span> <span class="n">Express</span><span class="p">.</span><span class="n">Instance</span><span class="p">;</span>
                <span class="kt">var</span> <span class="n">type</span> <span class="p">=</span> <span class="n">instance</span><span class="p">.</span><span class="nf">GetType</span><span class="p">();</span>

                <span class="n">Type</span><span class="p">[]</span> <span class="n">argumentTypeList</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">callMessageWrapper</span><span class="p">.</span><span class="n">Args</span><span class="p">?.</span><span class="nf">Any</span><span class="p">()</span> <span class="k">is</span> <span class="k">true</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">argumentTypeList</span> <span class="p">=</span> <span class="n">callMessageWrapper</span><span class="p">.</span><span class="n">Args</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">temp</span> <span class="p">=&gt;</span> <span class="n">temp</span><span class="p">.</span><span class="nf">GetType</span><span class="p">()).</span><span class="nf">ToArray</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">argumentTypeList</span> <span class="p">=</span> <span class="n">Type</span><span class="p">.</span><span class="n">EmptyTypes</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="kt">var</span> <span class="n">method</span> <span class="p">=</span> <span class="n">type</span><span class="p">.</span><span class="nf">GetMethod</span><span class="p">(</span><span class="n">methodBase</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">argumentTypeList</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">method</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="s">"è°ƒç”¨æ–¹æ³•ä¸åŒ¹é…ï¼Œæ‰¾ä¸åˆ°"</span> <span class="p">+</span> <span class="n">methodBase</span> <span class="p">+</span> <span class="s">"æ–¹æ³•"</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="k">new</span> <span class="nf">ReturnMessage</span><span class="p">(</span>
                    <span class="n">method</span><span class="p">.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">callMessageWrapper</span><span class="p">.</span><span class="n">Args</span><span class="p">),</span>
                    <span class="n">callMessageWrapper</span><span class="p">.</span><span class="n">Args</span><span class="p">,</span> <span class="n">callMessageWrapper</span><span class="p">.</span><span class="n">ArgCount</span><span class="p">,</span> <span class="n">callMessageWrapper</span><span class="p">.</span><span class="n">LogicalCallContext</span><span class="p">,</span>
                    <span class="n">callMessageWrapper</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>åˆ›å»º DynamicProxy ç±»ï¼Œè¿™ä¸ªç±»å°±æ˜¯ç»™ç”¨æˆ·ç”¨çš„ï¼Œå½“ç„¶å®é™…çš„å‘½åå°†ä¼šä¿®æ”¹</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">class</span> <span class="nc">DynamicProxy</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Guid</span> <span class="n">guid</span><span class="p">,</span> <span class="kt">object</span> <span class="n">instance</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_dictionary</span><span class="p">[</span><span class="n">guid</span><span class="p">]</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Express</span><span class="p">(</span><span class="k">new</span> <span class="n">Lazy</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">instance</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">static</span> <span class="n">T</span> <span class="n">GetObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">Guid</span> <span class="n">guid</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="k">typeof</span><span class="p">(</span><span class="n">T</span><span class="p">).</span><span class="n">IsInterface</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">new</span> <span class="nf">Proxy</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">T</span><span class="p">),</span> <span class="n">_dictionary</span><span class="p">[</span><span class="n">guid</span><span class="p">]).</span><span class="nf">GetTransparentProxy</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="c1">// å®é™…ä»£ç è¯·ä½¿ç”¨ç¼“å­˜æ± </span>
        <span class="k">private</span> <span class="k">static</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">Guid</span><span class="p">,</span> <span class="n">Express</span><span class="p">&gt;</span> <span class="n">_dictionary</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">Guid</span><span class="p">,</span> <span class="n">Express</span><span class="p">&gt;();</span>

        <span class="k">class</span> <span class="nc">Express</span>
        <span class="p">{</span>
        	<span class="c1">// å¿½ç•¥ä»£ç </span>
        <span class="p">}</span>

        <span class="k">class</span> <span class="nc">Proxy</span> <span class="p">:</span> <span class="n">RealProxy</span>
        <span class="p">{</span>
        	<span class="c1">// å¿½ç•¥ä»£ç </span>
        <span class="p">}</span>

    <span class="p">}</span>
</code></pre></div></div>

<p>åœ¨å®é™…ä½¿ç”¨ä¸Šé¢ä»£ç è¿˜éœ€è¦åšå¾ˆå¤šæ›´æ”¹ï¼Œä¾‹å¦‚æ”¯æŒ Express é‡Œé¢æ·»åŠ å¤šä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯ç»™ç”¨æˆ·ä¸€ä¸ª Guid å’Œæ¥å£è°ƒç”¨çš„æ–¹æ³•ï¼Œä¸åŒçš„æ–¹æ³•å®é™…å¯ä»¥ä»å¤šä¸ªç±»é‡Œé¢è°ƒç”¨</p>

<p>æœ¬æ–‡ä»£ç æ”¾åœ¨<a href="https://github.com/lindexi/lindexi_gd/tree/1e65084e8a8f56695ab6580f20dee74e6c10353b/LebaicocaqeregelHojajaycal">github</a>æ¬¢è¿å°ä¼™ä¼´è®¿é—®</p>

:ET