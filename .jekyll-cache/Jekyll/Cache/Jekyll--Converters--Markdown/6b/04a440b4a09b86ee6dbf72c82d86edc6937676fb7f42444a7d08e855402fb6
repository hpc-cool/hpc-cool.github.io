I"Å<p>ä»Šå¤©æ˜¯ 2020.11.13 æˆ‘åœ¨ CI æœåŠ¡å™¨ä¸Šæ›´æ–° dotnet åˆ° dotnet 5 ä»¥åŠ VS åˆ° 16.8.1 æœ€æ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘åœ¨åˆšåˆšä¸å¾—ä¸å›æ»šäº†ç¯å¢ƒâ€¦â€¦ å› ä¸ºæ„å»ºä¸é€šè¿‡</p>

<!--more-->

<!-- CreateTime:2020/11/14 10:01:27 -->

<p>å½“å‰å·²ç»è¸©å‘å®Œæˆï¼Œè¯·çœ‹ <a href="https://blog.lindexi.com/post/%E5%A6%82%E4%BD%95%E7%BB%99-CI-CD-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%E4%B8%8A-.NET-5-%E6%9E%84%E5%BB%BA%E5%92%8C%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83.html">å¦‚ä½•ç»™ CI CD æœåŠ¡å™¨æ­å»ºä¸Š .NET 5 æ„å»ºå’Œè¿è¡Œç¯å¢ƒ</a></p>

<h2 id="ç°è±¡">ç°è±¡</h2>

<p>ä½¿ç”¨ç»å…¸çš„ NuGet è¿˜åŸåŠ ä¸Š msbuild çš„æ„å»ºï¼Œå¦‚ä»¥ä¸‹ä»£ç å°†ä¼šæ„å»ºå¤±è´¥</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nuget restore
msbuild /p:Configuration=Release
</code></pre></div></div>

<p>æ„å»ºå¤±è´¥æ ¸å¿ƒæç¤ºå¦‚ä¸‹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\Program Files\dotnet\sdk\5.0.100\Sdks\Microsoft.NET.Sdk\targets\Microsoft.PackageDependencyResolution.targets(241,5): error NETSDK1005: èµ„äº§æ–‡ä»¶â€œC:\gitlab\builds\SKH4KvNc\0\Lindexi\Lindexi-Doubi\demo\Lindexi.Doubi.DesktopModeDemo\obj\project.assets.jsonâ€æ²¡æœ‰â€œnet45â€çš„ç›®æ ‡ã€‚ç¡®ä¿å·²è¿è¡Œè¿˜åŸï¼Œä¸”â€œnet45â€å·²åŒ…å«åœ¨é¡¹ç›®çš„ TargetFrameworks ä¸­ã€‚ [C:\gitlab\builds\SKH4KvNc\0\Lindexi\Lindexi-Doubi\demo\Lindexi.Doubi.DesktopModeDemo\Lindexi.Doubi.DesktopModeDemo.csproj]
</code></pre></div></div>

<h2 id="åŸå› ">åŸå› </h2>

<p>æœ¬è´¨åŸå› æ˜¯ NuGet æ²¡æœ‰è·Ÿä¸Šæ­¥ä¼ï¼Œå› ä¸ºé€šè¿‡ dotnet restore æ˜¯å¯ä»¥çš„</p>

<h2 id="ä¸å®Œç¾è§£å†³æ–¹æ³•">ä¸å®Œç¾è§£å†³æ–¹æ³•</h2>

<p>å¦‚æœé¡¹ç›®é‡Œé¢ä¸å­˜åœ¨æ—§é¡¹ç›®æ ¼å¼ï¼Œä»¥åŠ VS æ’ä»¶é¡¹ç›®ç­‰ç­‰é¡¹ç›®ï¼Œè¯•è¯•ç”¨ dotnet å‘½ä»¤æ„å»º</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet build -c release
</code></pre></div></div>

<p>æˆ–è€…ä½¿ç”¨ dotnet çš„è¿˜åŸé…åˆ msbuild çš„æ„å»º</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet restore
msbuild /p:Configuration=Release
</code></pre></div></div>

<p>ä½†æ˜¯ä»¥ä¸Šæ–¹æ³•éƒ½æœ‰ç¼ºç‚¹ï¼Œåœ¨ä¸€äº›ä½¿ç”¨æ—§ç‰ˆæœ¬æ ¼å¼çš„ csproj é¡¹ç›®æ–‡ä»¶é‡Œé¢ï¼Œä»¥åŠä¸€äº› VSTO é¡¹ç›®ï¼Œæˆ–è€…å¼•ç”¨äº† COM çš„é¡¹ç›®å’Œ VS æ’ä»¶é¡¹ç›®ç­‰ç±»å‹é‡Œé¢ï¼Œå°†å› ä¸º dotnet restore çš„ä¸æ”¯æŒå¯¼è‡´åç»­æ„å»ºä¸é€šè¿‡ã€‚æˆ–è€…åœ¨ dotnet build é‡Œé¢ä½¿ç”¨äº† dotnet core ç‰ˆæœ¬çš„ msbuild ä¸¢å¤±äº†æ—§ç‰ˆæœ¬ dotnet framework ç‰ˆæœ¬çš„ msbuild æ”¯æŒçš„æ—§ç‰ˆæœ¬åŠŸèƒ½ï¼Œè®©ä¸€äº›æ—§ç‰ˆæœ¬é¡¹ç›®æ„å»ºä¸é€šè¿‡</p>

<p>æˆ‘å½“å‰çš„ CI æœåŠ¡å™¨ä¸Šä¾ç„¶æ‰¿æ‹…äº†ä¸€å®šæ•°é‡çš„æ—§ç‰ˆæœ¬é¡¹ç›®çš„ä»»åŠ¡ï¼Œå› æ­¤ dotnet 5 ç¯å¢ƒæš‚æ—¶è¿˜ä¸èƒ½æ”¯æŒï¼Œåªèƒ½å›æ»šäº†</p>

<h2 id="å½»åº•çš„è§£å†³æ–¹æ³•">å½»åº•çš„è§£å†³æ–¹æ³•</h2>

<p><del>å½»åº•çš„è§£å†³æ–¹æ³•æ˜¯ï¼š å†ç­‰å‡ å¤©</del></p>

<p>æ›´æ–°åˆ° NuGet 5.8 å°±èƒ½è§£å†³</p>

<p>è¿™æ˜¯å…¨ç½‘é¦–ä¸ªèƒ½æ”¯æŒ .NET 5 çš„ NuGet ç‰ˆæœ¬ï¼Œåœ¨ <a href="https://dist.nuget.org/win-x86-commandline/v5.8.0/nuget.exe">https://dist.nuget.org/win-x86-commandline/v5.8.0/nuget.exe</a> å¯ä»¥ä¸‹è½½</p>

<!-- å…¨ç½‘é¦–ä¸ªæ”¯æŒ .NET 5 çš„ NuGet ç‰ˆæœ¬ 5.8 æ­£å¼å‘å¸ƒ -->

:ET