I"³<p>ä»¥å‰çš„é¡¹ç›®æ ¼å¼ä½¿ç”¨çš„æ˜¯ csproj çš„æ ¼å¼ï¼Œä½†æ˜¯ .net core æ”¯æŒä½¿ç”¨ project.json æ ¼å¼çš„é¡¹ç›®æ–‡ä»¶ï¼Œåæ¥è¿˜æ˜¯å†³å®šä¸ä½¿ç”¨è¿™ä¸ªæ ¼å¼ã€‚ VS2017 çš„é¡¹ç›®æ ¼å¼æ›´å¥½è¯»ã€æ›´ç®€å•è€Œä¸”å‡å°‘äº† git å†²çªã€‚
æœ¬æ–‡æ¥å‘Šè¯‰å¤§å®¶å¦‚ä½•ä» VS2015 å’Œä»¥å‰çš„é¡¹ç›®æ ¼å¼ä¿®æ”¹ä¸º VS2017 é¡¹ç›®æ ¼å¼ã€‚å½“å‰å¯¹æ–°é¡¹ç›®æ ¼å¼çš„å‘½åæ˜¯ SDK Style é£æ ¼çš„ csproj é¡¹ç›®æ–‡ä»¶æ ¼å¼ã€‚è€Œåœ¨ VS2015 å’Œä»¥å‰çš„é¡¹ç›®æ ¼å¼æ˜¯ Franken-proj æ ¼å¼</p>

<!--more-->

<!-- CreateTime:2019/12/26 8:29:56 -->

<div id="toc"></div>

<!-- æ ‡ç­¾ï¼šVisualStudio -->

<p>åœ¨è¿ç§»ä¹‹å‰ï¼Œæˆ‘éœ€è¦å‘Šè¯‰å¤§å®¶ï¼Œ<del>ç°åœ¨æ˜¯2018å¹´1æœˆ15æ—¥ï¼Œæœ€æ–°çš„é¡¹ç›®æ ¼å¼åªæœ‰å¯¹ä¸‹é¢çš„é¡¹ç›®æ”¯æŒ</del> ç°åœ¨æ˜¯ 2020å¹´12æœˆ å¥½åƒå•¥é¡¹ç›®éƒ½æ”¯æŒäº†</p>

<ul>
  <li>class library projects ç±»åº“é¡¹ç›®</li>
  <li>console apps           æ§åˆ¶é¡¹ç›®</li>
  <li>ASP.NET Core web apps  asp é¡¹ç›®</li>
  <li>.NET Core              .NET Core</li>
  <li>è¿˜æœ‰å…¶ä»–æ‰€æœ‰çš„é¡¹ç›®</li>
</ul>

<h2 id="è‡ªåŠ¨åŒ–å‡çº§">è‡ªåŠ¨åŒ–å‡çº§</h2>

<p>å› ä¸ºå¥½å¤šå°ä¼™ä¼´éƒ½åœ¨æœŸæœ›æœ‰è‡ªåŠ¨åŒ–çš„å·¥å…·å»è½¬æ¢ï¼Œå› æ­¤ dotnet åŸºé‡‘ä¼šç‰¹åˆ«æ¨å‡ºäº†è½¬æ¢å·¥å…·</p>

<p>è¯¦ç»†è¯·çœ‹å®˜æ–¹æ–‡æ¡£ <a href="https://docs.microsoft.com/zh-cn/dotnet/core/porting/upgrade-assistant-wpf-framework?WT.mc_id=WD-MVP-5003260">å°† WPF åº”ç”¨å‡çº§åˆ° .NET 5 - .NET Core</a></p>

<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹</p>

<p>è¿™æ˜¯ä¸€ä¸ª dotnet tool å·¥å…·ï¼Œä½¿ç”¨ä¹‹å‰å…ˆä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨ GitHub ä¸Šå®Œå…¨å¼€æºçš„ä»“åº“ï¼Œè¯·çœ‹ <a href="https://github.com/dotnet/try-convert">https://github.com/dotnet/try-convert</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet tool install -g try-convert
</code></pre></div></div>

<p>æ¥ç€è¿›å…¥åˆ°éœ€è¦è½¬æ¢çš„é¡¹ç›®æ‰€åœ¨çš„æ–‡ä»¶å¤¹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd éœ€è¦è½¬æ¢çš„é¡¹ç›®æ‰€åœ¨çš„æ–‡ä»¶å¤¹
</code></pre></div></div>

<p>ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œè‡ªåŠ¨åŒ–è½¬æ¢</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>try-convert
</code></pre></div></div>

<p>é»˜è®¤èƒ½å°† csproj è½¬æ¢å¥½ï¼Œä½†æ˜¯è½¬æ¢å®Œæˆä¹‹åï¼Œä¹Ÿè®¸ä¼šæ„å»ºä¸é€šè¿‡ï¼Œå¦‚æç¤º ç‰¹æ€§é‡å¤çš„ç¼–è¯‘å‡ºç° CS0579 é‡å¤ï¼Œè¯·çœ‹ä¸‹é¢æç¤ºå†…å®¹</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Error CS0579: â€œSystem.Reflection.AssemblyCompanyAttributeâ€ç‰¹æ€§é‡å¤ (1, 1)
</code></pre></div></div>

<p>è§£å†³æ–¹æ³•æ˜¯åˆ é™¤ AssemblyInfo.cs æ–‡ä»¶çš„å†…å®¹ã€‚ç‰¹æ€§æ–‡ä»¶ä¸åˆ é™¤ä¹Ÿå¯ä»¥ï¼Œè¯·ä½¿ç”¨<a href="https://blog.lindexi.com/post/%E8%A7%A3%E5%86%B3%E4%BB%8E%E6%97%A7%E6%A0%BC%E5%BC%8F%E7%9A%84-csproj-%E8%BF%81%E7%A7%BB%E5%88%B0%E6%96%B0%E6%A0%BC%E5%BC%8F%E7%9A%84-csproj-%E6%A0%BC%E5%BC%8F-AssemblyInfo-%E6%96%87%E4%BB%B6%E5%80%BC%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98.html">è§£å†³ä»æ—§æ ¼å¼çš„ csproj è¿ç§»åˆ°æ–°æ ¼å¼çš„ csproj æ ¼å¼ AssemblyInfo æ–‡ä»¶å€¼é‡å¤é—®é¢˜</a>çš„æ–¹æ³•</p>

<p>è¯¦ç»†è¯·çœ‹ <a href="https://blog.lindexi.com/post/dotnet-%E8%87%AA%E5%8A%A8%E8%BF%81%E7%A7%BB-VS-2017-%E4%BB%A5%E5%89%8D%E7%9A%84-csproj-%E8%BD%AC%E4%B8%BA-dotnet-core-%E7%9A%84-SDK-Style-%E9%A3%8E%E6%A0%BC%E5%B7%A5%E5%85%B7.html">dotnet è‡ªåŠ¨è¿ç§» VS 2017 ä»¥å‰çš„ csproj è½¬ä¸º dotnet core çš„ SDK Style é£æ ¼å·¥å…·</a></p>

<p>å…¶ä»–ç»†èŠ‚éƒ¨åˆ†è¿˜è¯·çœ‹æ‰‹åŠ¨ä¿®æ”¹</p>

<h2 id="æ‰‹åŠ¨ä¿®æ”¹">æ‰‹åŠ¨ä¿®æ”¹</h2>

<p><del>å¯¹äº UWP å’Œ WPF ï¼Œæœ‰ xaml çš„é¡¹ç›®æ˜¯æ²¡æœ‰å¾ˆå¥½æ”¯æŒ</del> ç°åœ¨æ˜¯ 2020å¹´12æœˆ å¥½åƒæ”¯æŒä¸é”™</p>

<p><del>ç°åœ¨å¾ˆå¤šé¡¹ç›®ï¼Œæµ‹è¯•ä½¿ç”¨çš„é¡¹ç›®éƒ½ä½¿ç”¨æ–°æ ¼å¼ï¼Œå»ºè®®åœ¨è‡ªå·±ç”¨æ¥æµ‹è¯•çš„é¡¹ç›®è¯•è¯•</del></p>

<p><del>å»ºè®®ä»ä¸€ä¸ªæµ‹è¯•é¡¹ç›®è¯•è¯•ï¼Œå…ˆåšå¥½æäº¤ï¼Œå¦‚æœå¤±è´¥å¯ä»¥å›æ»šã€‚</del> ä¸ç”¨è¯•è¯•äº†ï¼Œæˆ‘éƒ½ç©äº†ä¸‰å¹´äº†</p>

<p>å¦‚æœåˆ›å»ºæ˜¯åº“é¡¹ç›®ï¼Œé‚£ä¹ˆ csproj æ–‡ä»¶åªæœ‰ä¸‹é¢çš„ä»£ç å°±å¯ä»¥å®Œæˆäº†</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>net46<span class="nt">&lt;/TargetFramework&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>å¦‚æœåˆ›å»ºçš„æ˜¯æ§åˆ¶é¡¹ç›®ï¼Œé‚£ä¹ˆåªæœ‰ä¸‹é¢çš„ä»£ç </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;OutputType&gt;</span>Exe<span class="nt">&lt;/OutputType&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>net46<span class="nt">&lt;/TargetFramework&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>å¦‚æœåˆ›å»ºçš„æ˜¯æµ‹è¯•é¡¹ç›®ï¼Œé‚£ä¹ˆåªæœ‰ä¸‹é¢çš„ä»£ç </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>net46<span class="nt">&lt;/TargetFramework&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.NET.Test.Sdk"</span> <span class="na">Version=</span><span class="s">"15.0.0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"xunit"</span> <span class="na">Version=</span><span class="s">"2.2.0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"xunit.runner.visualstudio"</span> <span class="na">Version=</span><span class="s">"2.2.0"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>
<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæ˜¯ WinForms æˆ– WPF é¡¹ç›®ï¼Œé‚£ä¹ˆåªæœ‰ä¸‹é¢çš„ä»£ç </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk.WindowsDesktop"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;OutputType&gt;</span>WinExe<span class="nt">&lt;/OutputType&gt;</span>
    <span class="nt">&lt;TargetFrameworks&gt;</span>netcoreapp3.1;net5-windows<span class="nt">&lt;/TargetFrameworks&gt;</span>
    <span class="nt">&lt;UseWPF&gt;</span>true<span class="nt">&lt;/UseWPF&gt;</span>
    <span class="nt">&lt;UseWindowsForms&gt;</span>true<span class="nt">&lt;/UseWindowsForms&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæƒ³çŸ¥é“æ–°æ ¼å¼å’Œä¹‹å‰çš„åŒºåˆ«ï¼Œå¦‚ä½•ä»ä»¥å‰çš„æ ¼å¼è¿åˆ°æ–°çš„æ ¼å¼ï¼Œè¯·ç»§ç»­é˜…è¯»æœ¬æ–‡</p>

<p>ä¸‹é¢ä»é¡¹ç›®çš„ç¬¬ä¸€è¡Œå¼€å§‹æ¥å‘Šè¯‰å¤§å®¶å¦‚ä½•ä¸€æ­¥æ­¥è¿ç§»ã€‚å½“å‰è¿˜æ²¡æœ‰ä¸€ä¸ªå¯ä»¥åšåˆ°è‡ªåŠ¨åŒ–çš„è¿ç§»å·¥å…·ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¿«æ·çš„æ–¹å¼æ˜¯é‡æ–°æ–°å»ºé¡¹ç›®ï¼Œç„¶åä¸€ç‚¹ç‚¹å°†åŸæœ‰é¡¹ç›®çš„å†…å®¹é€šè¿‡åœ¨ VS ä¸Šå¯è§†åŒ–çš„æ­¥éª¤åŠ å›æ¥ã€‚æœ¬æ–‡ä¼šå‘Šè¯‰å¤§å®¶çš„æ˜¯å¦‚ä½•ç¼–è¾‘ csproj æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åœ¨ VS ä¸Šé€šè¿‡ç‚¹ä¸€ç‚¹å®Œæˆï¼Œæœ¬æ–‡æ›´é€‚åˆé«˜çº§çš„å¼€å‘è€…</p>

<p>åŸæ¥çš„ç¬¬ä¸€è¡Œçš„ä»£ç å¤§æ¦‚å†…å®¹å¦‚ä¸‹</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="p">=</span><span class="s">"1.0"</span> <span class="n">encoding</span><span class="p">=</span><span class="s">"utf-8"</span><span class="p">?&gt;</span>
<span class="p">&lt;</span><span class="n">Project</span> <span class="n">ToolsVersion</span><span class="p">=</span><span class="s">"14.0"</span> <span class="n">DefaultTargets</span><span class="p">=</span><span class="s">"Build"</span> <span class="n">xmlns</span><span class="p">=</span><span class="s">"http://schemas.microsoft.com/developer/msbuild/2003"</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>æ–°çš„æ ¼å¼çš„ç¬¬ä¸€è¡Œå†…å®¹å¦‚ä¸‹</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>æˆ–è€…å¯¹äº WPF æ¥è¯´æ˜¯å¦‚ä¸‹æ ¼å¼ï¼Œå…³äº WPF éƒ¨åˆ†æ”¾åœ¨æœ¬æ–‡æœ€å</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk.WindowsDesktop"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>ä»ç¬¬ä¸€è¡Œå¯ä»¥çœ‹åˆ°æ–°çš„æ ¼å¼çš„ä»£ç æ¯”è¾ƒå°‘ï¼Œè€Œå®é™…ä¸Šé™¤äº†ç¬¬ä¸€è¡Œä¹‹å¤–ï¼Œåé¢çš„å†…å®¹æœ‰ç€æ›´å¤§çš„ç®€åŒ–</p>

<p><del>å…¶å®å»ºè®®å¤§å®¶é‡æ–°åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åæŠŠæ–‡ä»¶æ”¾è¿›å»ï¼Œå®‰è£… Nuget ä¸ç„¶éœ€è¦ä¿®æ”¹æ¯”è¾ƒå¤š</del></p>

<h2 id="å¿…é¡»åˆ é™¤çš„å†…å®¹">å¿…é¡»åˆ é™¤çš„å†…å®¹</h2>

<p>ä¸‹é¢çš„ä»£ç å¿…é¡»åˆ é™¤ï¼Œå› ä¸ºæ–°çš„ SDK é£æ ¼çš„é¡¹ç›®æ ¼å¼ä¸å†éœ€è¦äº†</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- usually at the top of the file --&gt;</span>
<span class="c">&lt;!-- ä¸‹é¢çš„ä»£ç ä¸€èˆ¬åœ¨æ–‡ä»¶çš„æœ€å‰ --&gt;</span>
<span class="nt">&lt;Import</span> <span class="na">Project=</span><span class="s">"$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props"</span> <span class="na">Condition=</span><span class="s">"Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')"</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- usually at the bottom --&gt;</span>
<span class="c">&lt;!-- ä¸€èˆ¬åœ¨æ–‡ä»¶çš„æœ€åé¢ --&gt;</span>
<span class="nt">&lt;Import</span> <span class="na">Project=</span><span class="s">"$(MSBuildToolsPath)\Microsoft.CSharp.targets"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;Import</span> <span class="na">Project=</span><span class="s">"$(VSToolsPath)\TeamTest\Microsoft.TestTools.targets"</span> <span class="na">Condition=</span><span class="s">"Exists('$(VSToolsPath)\TeamTest\Microsoft.TestTools.targets')"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>è¿˜éœ€è¦åˆ é™¤ AssemblyInfo.cs æ–‡ä»¶ï¼Œä¸ç„¶ç¼–è¯‘å‡ºç° CS0579 é‡å¤ï¼Œè¯·çœ‹ä¸‹é¢æç¤ºå†…å®¹</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Error CS0579: â€œSystem.Reflection.AssemblyCompanyAttributeâ€ç‰¹æ€§é‡å¤ (1, 1)
</code></pre></div></div>

<p>ç‰¹æ€§æ–‡ä»¶ä¸åˆ é™¤ä¹Ÿå¯ä»¥ï¼Œè¯·ä½¿ç”¨<a href="https://blog.lindexi.com/post/%E8%A7%A3%E5%86%B3%E4%BB%8E%E6%97%A7%E6%A0%BC%E5%BC%8F%E7%9A%84-csproj-%E8%BF%81%E7%A7%BB%E5%88%B0%E6%96%B0%E6%A0%BC%E5%BC%8F%E7%9A%84-csproj-%E6%A0%BC%E5%BC%8F-AssemblyInfo-%E6%96%87%E4%BB%B6%E5%80%BC%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98.html">è§£å†³ä»æ—§æ ¼å¼çš„ csproj è¿ç§»åˆ°æ–°æ ¼å¼çš„ csproj æ ¼å¼ AssemblyInfo æ–‡ä»¶å€¼é‡å¤é—®é¢˜</a>çš„æ–¹æ³•</p>

<h2 id="å¿…é¡»ä¿®æ”¹">å¿…é¡»ä¿®æ”¹</h2>

<p>éœ€è¦ä¿®æ”¹å¹³å°æ¡†æ¶çš„ä»£ç </p>

<p>è¿™æ˜¯ä»¥å‰çš„ä»£ç </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;PropertyGroup&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
  <span class="nt">&lt;TargetFrameworkVersion&gt;</span>v4.5.2<span class="nt">&lt;/TargetFrameworkVersion&gt;</span>
<span class="nt">&lt;/PropertyGroup&gt;</span>
</code></pre></div></div>

<p>éœ€è¦ä¿®æ”¹ä¸ºä¸‹é¢çš„ä»£ç </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;PropertyGroup&gt;</span>
  <span class="nt">&lt;TargetFramework&gt;</span>net452<span class="nt">&lt;/TargetFramework&gt;</span>
<span class="nt">&lt;/PropertyGroup&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæ˜¯ v4.5.2 ï¼Œè¯·ä¿®æ”¹ä¸º net452 ï¼Œå¦‚æœæ˜¯ v4.6 å°±ä¿®æ”¹ä¸º net46 è¯¦ç»†è¯·çœ‹ <a href="https://blog.lindexi.com/post/dotnet-%E6%96%B0%E9%A1%B9%E7%9B%AE%E6%A0%BC%E5%BC%8F%E4%B8%8E%E5%AF%B9%E5%BA%94%E6%A1%86%E6%9E%B6%E9%A2%84%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AE%8F.html">dotnet æ–°é¡¹ç›®æ ¼å¼ä¸å¯¹åº”æ¡†æ¶é¢„å®šä¹‰çš„å®</a></p>

<h2 id="æ·»åŠ æ–‡ä»¶">æ·»åŠ æ–‡ä»¶</h2>

<p>ç°åœ¨æ–°çš„æ ¼å¼å¯ä»¥ä½¿ç”¨é€šé…æ·»åŠ æ–‡ä»¶ï¼Œä¾‹å¦‚åœ¨æ–‡ä»¶å¤¹çš„æ‰€æœ‰çš„ä»£ç éƒ½éœ€è¦æ·»åŠ ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹å¼</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Compile</span> <span class="na">Include=</span><span class="s">"lindexi\*.cs"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>å¦‚æœå•¥éƒ½ä¸åšï¼Œé»˜è®¤çš„ SDK é£æ ¼çš„é¡¹ç›®æ ¼å¼å·²ç»åŒ…å«äº†å¦‚ä¸‹çš„å¼•ç”¨</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- the defaults --&gt;</span>
<span class="nt">&lt;Compile</span> <span class="na">Include=</span><span class="s">"**\*.cs"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;EmbeddedResource</span> <span class="na">Include=</span><span class="s">"**\*.resx"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>æ‰€ä»¥æ·»åŠ çš„ cs æ–‡ä»¶éƒ½ä¼šæ·»åŠ åˆ°ç¼–è¯‘ï¼Œéœ€è¦åˆ é™¤è¿™ä¸ªä»£ç æ‰å¯ä»¥ä¸ç¼–è¯‘ä¸€äº›æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯åŸå…ˆå†™çš„æ·»åŠ æ–‡ä»¶éƒ½éœ€è¦åˆ é™¤ï¼Œå¦‚æœä¸æƒ³åˆ é™¤å¯ä»¥ä½¿ç”¨ EnableDefaultCompileItems è®¾ç½®ä¸æ·»åŠ  cs æ–‡ä»¶ã€‚å¦åˆ™å°†ä¼šæç¤ºæ–‡ä»¶é‡å¤</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;EnableDefaultCompileItems&gt;</span>false<span class="nt">&lt;/EnableDefaultCompileItems&gt;</span>
</code></pre></div></div>

<p>å¯¹ WPF é¡¹ç›®éœ€è¦é¢å¤–è®¾ç½® EnableDefaultPageItems ä¸åŒ…å« Page è§£å†³</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;EnableDefaultPageItems&gt;</span>false<span class="nt">&lt;/EnableDefaultPageItems&gt;</span>
</code></pre></div></div>

<p>æ›´å¤šé»˜è®¤çš„è¡Œä¸ºè¯·çœ‹ <a href="https://blog.lindexi.com/post/Roslyn-%E7%A6%81%E6%AD%A2-sdk-style-csproj-%E9%BB%98%E8%AE%A4%E5%BC%95%E7%94%A8-Compile-%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6.html">Roslyn ç¦æ­¢ sdk style csproj é»˜è®¤å¼•ç”¨ Compile ä»£ç æ–‡ä»¶</a></p>

<h2 id="é¡¹ç›®å¼•ç”¨">é¡¹ç›®å¼•ç”¨</h2>

<p>ä¹‹å‰çš„æ–¹å¼éœ€è¦æ·»åŠ å¾ˆå¤šä»£ç ï¼Œå¦‚å¼•ç”¨ ClassLibrary1 çš„é¡¹ç›®ï¼Œéœ€è¦å†™ä¸‹é¢çš„ä»£ç </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ProjectReference</span> <span class="na">Include=</span><span class="s">"..\ClassLibrary1\ClassLibrary1.csproj"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;Project&gt;</span>{2C7DF870-5B35-49EF-963D-EE1E72C3177E}<span class="nt">&lt;/Project&gt;</span>
  <span class="nt">&lt;Name&gt;</span>ClassLibrary1<span class="nt">&lt;/Name&gt;</span>
<span class="nt">&lt;/ProjectReference&gt;</span>
</code></pre></div></div>

<p>Project è¿™ä¸ªå¯ä»¥è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç±»åº“æˆ–ä¸€ä¸ªå…¶ä»–çš„é¡¹ç›®ï¼Œå› ä¸ºæ–°çš„é¡¹ç›®ä¸éœ€è¦è¿™ä¸ªï¼Œæ‰€ä»¥åœ¨æ–°å»ºæ–‡ä»¶çš„æ—¶å€™å°±ä¸çŸ¥é“ç»™å“ªä¸ªé¡¹ç›®ï¼Œè¿™æ˜¯æ¯”è¾ƒå·®çš„</p>

<p>æ–°çš„æ ¼å¼å°±éœ€è¦ä¸‹é¢çš„ä»£ç ï¼Œä¸éœ€è¦ä½¿ç”¨ Project å’Œ Name è¿™ä¸¤ä¸ªå…ƒç´ </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ProjectReference</span> <span class="na">Include=</span><span class="s">"..\ClassLibrary1\ClassLibrary1.csproj"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>å¦‚æœå¼•ç”¨çš„é¡¹ç›®æœ‰ä¾èµ–ï¼Œä»¥å‰çš„æ ¼å¼éœ€è¦æŠŠå¼•ç”¨å†™åœ¨æ–‡ä»¶ï¼Œç°åœ¨ä¸éœ€è¦æ·»åŠ å¼•ç”¨</p>

<p>å‡å¦‚æœ‰ A å¼•ç”¨ B ï¼ŒB å¼•ç”¨ C ï¼Œé‚£ä¹ˆä¹‹å‰çš„Aé¡¹ç›®æ–‡ä»¶å°±æ˜¯è¿™æ ·</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ProjectReference</span> <span class="na">Include=</span><span class="s">"..\ProjectB\ProjectB.csproj"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;Project&gt;</span>{A900C843-8340-421B-B4F0-6C65A0D093C4}<span class="nt">&lt;/Project&gt;</span>
  <span class="nt">&lt;Name&gt;</span>ProjectB<span class="nt">&lt;/Name&gt;</span>
<span class="nt">&lt;/ProjectReference&gt;</span>
<span class="nt">&lt;ProjectReference</span> <span class="na">Include=</span><span class="s">"..\ProjectC\ProjectC.csproj"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;Project&gt;</span>{871AC142-FC46-49F5-A5E0-90436648B9C5}<span class="nt">&lt;/Project&gt;</span>
  <span class="nt">&lt;Name&gt;</span>ProjectB<span class="nt">&lt;/Name&gt;</span>
<span class="nt">&lt;/ProjectReference&gt;</span>
</code></pre></div></div>

<p>ç°åœ¨çš„æ–‡ä»¶æ ¼å¼ä¸éœ€è¦å†™å¼•ç”¨çš„ä¾èµ–ï¼Œåªéœ€è¦å†™å…¥æœ€é¡¶å±‚çš„ä¾èµ–å°±å¯ä»¥äº†</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ProjectReference</span> <span class="na">Include=</span><span class="s">"..\ProjectB\ProjectB.csproj"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>è€ŒåŸå…ˆå­˜åœ¨çš„ä¸€äº›å¼•ç”¨ï¼Œå¦‚ System.Net.Http ç­‰å¯ä»¥ä½¿ç”¨ <a href="https://blog.lindexi.com/post/dotnet-%E6%96%B0-sdk-style-%E9%A1%B9%E7%9B%AE%E6%A0%BC%E5%BC%8F%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8C%E5%BC%95%E7%94%A8.html">dotnet æ–° sdk style é¡¹ç›®æ ¼å¼çš„ä¸€äº›å‘½åç©ºé—´å’Œå¼•ç”¨</a> çš„æ–¹æ³•å¼•ç”¨</p>

<h2 id="å¼•ç”¨åŒ…">å¼•ç”¨åŒ…</h2>

<p>ä¹‹å‰çš„ Nuget å¼•ç”¨éœ€è¦æ·»åŠ  packages.config å’Œ  csproj æ‰å¯ä»¥ä½¿ç”¨ï¼Œç°åœ¨çš„ Nuget 4 å¯ä»¥ç›´æ¥åœ¨ csproj æ·»åŠ å¼•ç”¨</p>

<p>è¿™æ˜¯ä¹‹å‰çš„æ ¼å¼</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Import</span> <span class="na">Project=</span><span class="s">"..\..\packages\xunit.runner.visualstudio.2.2.0\build\net20\xunit.runner.visualstudio.props"</span> <span class="na">Condition=</span><span class="s">"Exists('..\..\packages\xunit.runner.visualstudio.2.2.0\build\net20\xunit.runner.visualstudio.props')"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;ItemGroup&gt;</span>
  <span class="nt">&lt;None</span> <span class="na">Include=</span><span class="s">"packages.config"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"MySql.Data, Version=6.9.9.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d, processorArchitecture=MSIL"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;HintPath&gt;</span>..\..\packages\MySql.Data.6.9.9\lib\net45\MySql.Data.dll<span class="nt">&lt;/HintPath&gt;</span>
  <span class="nt">&lt;Private&gt;</span>True<span class="nt">&lt;/Private&gt;</span>
<span class="nt">&lt;/Reference&gt;</span>
<span class="nt">&lt;/ItemGroup&gt;</span>
</code></pre></div></div>

<p>æ–°çš„æ ¼å¼å†™å¼•ç”¨ï¼Œä¸éœ€è¦ packages.config æ–‡ä»¶ï¼Œè¿™æ ·å‡å°‘äº†æ‰¾ä¸åˆ°nugetçš„å‘ï¼Œä¸‹é¢ä»£ç å°±æ˜¯æ–°çš„æ ¼å¼ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å‡å°‘<code class="language-plaintext highlighter-rouge">1/2</code></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ItemGroup&gt;</span>
  <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"xunit.runner.visualstudio"</span> <span class="na">Version=</span><span class="s">"2.2.0"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"MySql.Data"</span> <span class="na">Version=</span><span class="s">"6.9.9"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/ItemGroup&gt;</span>
</code></pre></div></div>

<p>è¿™ä¸ªæ ¼å¼å¯ä»¥åœ¨gitå†²çªæ¯”è¾ƒå®¹æ˜“çœ‹åˆ°å“ªé‡Œéœ€è¦ä¿®æ”¹ï¼Œæ‰€ä»¥è§£å†³å†²çªå¾ˆç®€å•</p>

<p>åœ¨ nuget 2 çš„å¼•ç”¨ï¼Œå¦‚æœå¼•ç”¨äº†åŒ…Aï¼Œä»–å¼•ç”¨äº† B åº“ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ packages.config å¼•ç”¨å†™äº†è¿™å‡ ä¸ªé¡¹ç›®</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="c">&lt;!-- in packages.config --&gt;</span>
<span class="nt">&lt;packages&gt;</span>
  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">"A"</span> <span class="na">version=</span><span class="s">"2.2.0"</span> <span class="na">targetFramework=</span><span class="s">"net452"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">"B"</span> <span class="na">version=</span><span class="s">"2.0.1"</span> <span class="na">targetFramework=</span><span class="s">"net452"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/packages&gt;</span>
</code></pre></div></div>

<p>ç°åœ¨ Nuget 4 éœ€è¦å†™å¼•ç”¨çš„åº“ï¼Œä¸éœ€è¦å†™ä»–çš„å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥å‡å°‘ä»£ç ï¼Œæ·»åŠ äº†idå’Œç‰ˆæœ¬å°±å¥½</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">ItemGroup</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="n">PackageReference</span> <span class="n">Include</span><span class="p">=</span><span class="s">"A"</span> <span class="n">Version</span><span class="p">=</span><span class="s">"2.2.0"</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="n">ItemGroup</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>å¦‚æœåœ¨è¿ç§»è¿‡ç¨‹é‡åˆ°è¯¡å¼‚çš„é—®é¢˜ï¼Œè¯·çœ‹<a href="https://walterlv.github.io/post/introduce-new-style-csproj-into-net-framework.html">å°† WPFã€UWP ä»¥åŠå…¶ä»–å„ç§ç±»å‹çš„æ—§æ ·å¼çš„ csproj æ–‡ä»¶è¿ç§»æˆæ–°æ ·å¼çš„ csproj æ–‡ä»¶ - walterlv</a></p>

<h2 id="åˆ é™¤å¤šä½™æ–‡ä»¶">åˆ é™¤å¤šä½™æ–‡ä»¶</h2>

<p>ç°åœ¨ VisualStudio 2017 é¡¹ç›®æ ¼å¼ä¸éœ€è¦ä½¿ç”¨ AssemblyInfo åŒ…å«ä¸€äº›å€¼ï¼Œæ‰€ä»¥ç°åœ¨ç¼–è¯‘ VisualStudio ä¼šå‘ç°é‡å¤å®šä¹‰äº†ä¸€äº›å€¼ï¼Œéœ€è¦åˆ é™¤ <code class="language-plaintext highlighter-rouge">Properties/AssemblyInfo.cs</code> æ–‡ä»¶ã€‚</p>

<p>å¦‚æœåªæœ‰éœ€è¦å®šä¹‰ä¸€äº›å…¨å±€çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆç›´æ¥æ–°å»ºä¸€ä¸ªç±»å†™å°±å¥½ã€‚</p>

<p>å¦‚æœä¸æƒ³åˆ é™¤ï¼Œè¯·è®¾ç½® GenerateAssemblyInfo å±æ€§</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">&lt;</span><span class="n">GenerateAssemblyInfo</span><span class="p">&gt;</span><span class="k">false</span><span class="p">&lt;/</span><span class="n">GenerateAssemblyInfo</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>è¯¦ç»†è¯·çœ‹ <a href="https://blog.lindexi.com/post/%E8%A7%A3%E5%86%B3%E4%BB%8E%E6%97%A7%E6%A0%BC%E5%BC%8F%E7%9A%84-csproj-%E8%BF%81%E7%A7%BB%E5%88%B0%E6%96%B0%E6%A0%BC%E5%BC%8F%E7%9A%84-csproj-%E6%A0%BC%E5%BC%8F-AssemblyInfo-%E6%96%87%E4%BB%B6%E5%80%BC%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98.html">è§£å†³ä»æ—§æ ¼å¼çš„ csproj è¿ç§»åˆ°æ–°æ ¼å¼çš„ csproj æ ¼å¼ AssemblyInfo æ–‡ä»¶å€¼é‡å¤é—®é¢˜</a></p>

<p>åˆ é™¤çš„æ—¶å€™å°å¿ƒå±äº WPF çš„ ThemeInfo ç‰¹æ€§å’Œ COM ä¸èƒ½åˆ é™¤</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">assembly</span><span class="p">:</span> <span class="nf">ThemeInfo</span><span class="p">(</span>
    <span class="n">ResourceDictionaryLocation</span><span class="p">.</span><span class="n">None</span><span class="p">,</span> <span class="c1">//ä¸»é¢˜ç‰¹å®šèµ„æºè¯å…¸æ‰€å¤„ä½ç½®</span>
    <span class="c1">//(åœ¨é¡µé¢æˆ–åº”ç”¨ç¨‹åºèµ„æºè¯å…¸ä¸­ </span>
    <span class="c1">// æœªæ‰¾åˆ°æŸä¸ªèµ„æºçš„æƒ…å†µä¸‹ä½¿ç”¨)</span>
    <span class="n">ResourceDictionaryLocation</span><span class="p">.</span><span class="n">SourceAssembly</span> <span class="c1">//å¸¸è§„èµ„æºè¯å…¸æ‰€å¤„ä½ç½®</span>
    <span class="c1">//(åœ¨é¡µé¢ã€åº”ç”¨ç¨‹åºæˆ–ä»»ä½•ä¸»é¢˜ç‰¹å®šèµ„æºè¯å…¸ä¸­</span>
    <span class="c1">// æœªæ‰¾åˆ°æŸä¸ªèµ„æºçš„æƒ…å†µä¸‹ä½¿ç”¨)</span>
<span class="p">)]</span>
</code></pre></div></div>

<h2 id="è¾“å‡ºæ³¨é‡Šæ–‡æ¡£">è¾“å‡ºæ³¨é‡Šæ–‡æ¡£</h2>

<p>å¦‚æœéœ€è¦è¾“å‡ºæ³¨é‡Šæ–‡æ¡£æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ xx.xml æ³¨é‡Šæ–‡ä»¶ï¼Œåœ¨ä»¥å‰çš„ä»£ç æ˜¯åœ¨å±æ€§é¡µé¢ï¼Œç‚¹å‡»ç”Ÿæˆxmlé€‰é¡¹å°±å¯ä»¥ç”Ÿæˆçš„æ³¨é‡Šæ–‡æ¡£ï¼Œç°åœ¨æ–°çš„æ ¼å¼å’Œä¹‹å‰æœ‰äº›ä¸ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ä¸‹é¢çš„ä»£ç ç”Ÿæˆxmlæ³¨é‡Šæ–‡æ¡£æ–‡ä»¶ï¼Œè¯·çœ‹ä»£ç </p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;DocumentationFile&gt;</span>bin\$(Configuration)\$(TargetFramework)\$(AssemblyName).xml<span class="nt">&lt;/DocumentationFile&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
</code></pre></div></div>

<p>è¿™é‡Œçš„<code class="language-plaintext highlighter-rouge">$(Configuration)</code>å°±æ˜¯ç”¨åˆ°äº†å®ï¼Œä»–ä¼šæ›¿æ¢å½“å‰ç¼–è¯‘çš„æ˜¯ Debug è¿˜æ˜¯ release ï¼Œæ‰€ä»¥å¯¹äºæ‰€æœ‰çš„é¡¹ç›®éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥ç”Ÿæˆ xml æ³¨é‡Šæ–‡æ¡£æ–‡ä»¶</p>

<p>æˆ–è€…ä½¿ç”¨ OutputPath ç›¸åŒçš„æ–‡ä»¶å¤¹ï¼Œå› ä¸ºå¯èƒ½æ˜¯è‡ªå·±å®šä¹‰äº† OutputPath ä¸‹é¢ä»£ç å°±è‡ªå·±ä¿®æ”¹äº†ä¸åœ¨å½“å‰çš„æ–‡ä»¶å¤¹</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;OutputPath&gt;</span>..\..\bin\$(Configuration)\<span class="nt">&lt;/OutputPath&gt;</span>
    <span class="nt">&lt;DocumentationFile&gt;</span>$(OutputPath)$(TargetFramework)\$(AssemblyName).xml<span class="nt">&lt;/DocumentationFile&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
</code></pre></div></div>

<p>æ³¨æ„è¿™æ—¶éœ€è¦è®© OutputPath åœ¨ DocumentationFile ä¹‹å‰ï¼Œå¦åˆ™æ‹¿åˆ°çš„å€¼æ˜¯é»˜è®¤çš„å€¼</p>

<p>æ›´ç®€æ˜“çš„æ–¹æ³•ï¼Œå¯ä»¥æ— è§†è·¯å¾„çš„æ–¹æ³•æ˜¯ä½¿ç”¨ GenerateDocumentationFile å±æ€§</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;PropertyGroup&gt;</span>
      <span class="nt">&lt;GenerateDocumentationFile&gt;</span>true<span class="nt">&lt;/GenerateDocumentationFile&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
</code></pre></div></div>

<p>å°† XML è¾“å‡ºåˆ° NuGet åŒ…çš„æ–¹æ³•è¯·çœ‹ <a href="https://blog.lindexi.com/post/Roslyn-%E5%9C%A8-NuGet-%E5%8C%85%E4%B8%AD%E6%94%BE%E6%B3%A8%E9%87%8A-xml-%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95.html">Roslyn åœ¨ NuGet åŒ…ä¸­æ”¾æ³¨é‡Š xml æ–‡ä»¶çš„æ–¹æ³•</a></p>

<p>å¦‚æœè¿˜æœ‰å…¶ä»–çš„æ–‡ä»¶ä¹Ÿéœ€è¦æ”¾å…¥ NuGet åŒ…ï¼Œè¯·çœ‹ <a href="https://blog.lindexi.com/post/Roslyn-%E6%89%93%E5%8C%85%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%B0-NuGet-%E5%8C%85.html">Roslyn æ‰“åŒ…è‡ªå®šä¹‰çš„æ–‡ä»¶åˆ° NuGet åŒ…</a></p>

<h2 id="å¤šä¸ªæ¡†æ¶">å¤šä¸ªæ¡†æ¶</h2>

<p>å¦‚æœéœ€è¦åŒæ—¶æ‰“åŒ…å‡º dotnet standard å’Œ dotnet framework çš„åŒ…ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚</p>

<p>å› ä¸ºç°åœ¨å­˜åœ¨ä¸€äº›é¡¹ç›®æ˜¯ä½¿ç”¨å¤šä¸ªå¼€å‘æ¡†æ¶ï¼Œè¿™æ—¶å°±éœ€è¦ä¿®æ”¹<code class="language-plaintext highlighter-rouge">TargetFramework</code>ä¸º<code class="language-plaintext highlighter-rouge">TargetFrameworks</code>ä¹Ÿå°±æ˜¯å†™ä¸ºå¤æ•°çš„<code class="language-plaintext highlighter-rouge">TargetFrameworks</code>ï¼ŒæŠŠé‡Œé¢çš„ä¸€ä¸ªæ¡†æ¶ä¿®æ”¹ä¸ºå¤šä¸ªï¼Œè¯·çœ‹ä¸‹é¢</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;TargetFrameworks&gt;</span>net45;netstandard2.0<span class="nt">&lt;/TargetFrameworks&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæƒ³çŸ¥é“æ¯ä¸ªå¹³å°çš„ç¼©å†™ï¼Œè¯·çœ‹<a href="https://docs.microsoft.com/en-us/dotnet/standard/frameworks">Target frameworks</a> æˆ–æˆ‘çš„åšå®¢ <a href="https://blog.lindexi.com/post/dotnet-%E6%96%B0%E9%A1%B9%E7%9B%AE%E6%A0%BC%E5%BC%8F%E4%B8%8E%E5%AF%B9%E5%BA%94%E6%A1%86%E6%9E%B6%E9%A2%84%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AE%8F.html">dotnet æ–°é¡¹ç›®æ ¼å¼ä¸å¯¹åº”æ¡†æ¶é¢„å®šä¹‰çš„å®</a></p>

<h3 id="net-standard">.NET Standard</h3>

<ul>
  <li>netstandard1.0</li>
  <li>netstandard1.1</li>
  <li>netstandard1.2</li>
  <li>netstandard1.3</li>
  <li>netstandard1.4</li>
  <li>netstandard1.5</li>
  <li>netstandard1.6</li>
  <li>netstandard2.0</li>
</ul>

<h3 id="net-core">.NET Core</h3>

<ul>
  <li>netcoreapp1.0</li>
  <li>netcoreapp1.1</li>
  <li>netcoreapp2.0</li>
  <li>netcoreapp2.1</li>
</ul>

<h3 id="net-framework">.NET Framework</h3>

<ul>
  <li>net11</li>
  <li>net20</li>
  <li>net35</li>
  <li>net40</li>
  <li>net403</li>
  <li>net45</li>
  <li>net451</li>
  <li>net452</li>
  <li>net46</li>
  <li>net461</li>
  <li>net462</li>
  <li>net47</li>
  <li>net471</li>
  <li>net472</li>
</ul>

<h3 id="universal-windows-platform">Universal Windows Platform</h3>

<ul>
  <li>uap [uap10.0]</li>
  <li>uap10.0 [win10] [netcore50]</li>
</ul>

<h2 id="ä½¿ç”¨æ¡ä»¶åˆ¤æ–­">ä½¿ç”¨æ¡ä»¶åˆ¤æ–­</h2>

<p>å› ä¸ºåœ¨å¤šä¸ªæ¡†æ¶ï¼Œå­˜åœ¨ä¸€äº›æ¡†æ¶ä¸èƒ½å¼•ç”¨çš„åº“ï¼Œè€Œåœ¨ä¸€äº›æ¡†æ¶éœ€è¦è¿™äº›åº“ï¼Œå¦‚ ValueTuple ï¼Œå°±éœ€è¦åœ¨å¼•ç”¨çš„æ—¶å€™æ·»åŠ æ¡ä»¶</p>

<p>æ·»åŠ æ¡ä»¶å¯ä»¥ä½¿ç”¨è¿™æ ·çš„ä»£ç <code class="language-plaintext highlighter-rouge">Condition=" '$(TargetFramework)' == 'net40'</code> æŠŠ net40 ä¿®æ”¹ä¸ºä½ å¸Œæœ›çš„æ¡†æ¶å°±åœ¨æŒ‡å®šçš„æ¡†æ¶å¼•ç”¨åº“ã€‚</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">&lt;</span><span class="n">ItemGroup</span> <span class="n">Condition</span><span class="p">=</span><span class="s">" '$(TargetFramework)' == 'net40' "</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">Reference</span> <span class="n">Include</span><span class="p">=</span><span class="s">"System.Net"</span> <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="n">ItemGroup</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>å¦‚æœé€šè¿‡æ¡ä»¶è¿˜å¯ä»¥åœ¨æŸäº›æ¡†æ¶å¼•ç”¨æˆ–ä¸å¼•ç”¨æŸäº›æ–‡ä»¶ã€‚</p>

<p>åœ¨ä»£ç å¯ä»¥é€šè¿‡é»˜è®¤çš„å®æ¥åˆ¤æ–­å½“å‰æ˜¯å“ªä¸ªæ¡†æ¶ï¼Œé»˜è®¤çš„å®å°±æ˜¯ä¸Šé¢çš„ç¼©å†™çš„å¤§å†™</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
    <span class="p">{</span>
<span class="cp">#if NET40
</span>        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Target framework: .NET Framework 4.0"</span><span class="p">);</span>
<span class="cp">#elif NET45  
</span>        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Target framework: .NET Framework 4.5"</span><span class="p">);</span>
<span class="cp">#endif
</span>    <span class="p">}</span>
</code></pre></div></div>

<p>ä¸åŒæ¡†æ¶çš„å®è¯·çœ‹ä¸‹é¢</p>

<h3 id="net-framework-1">.NET Framework</h3>

<ul>
  <li>NET20</li>
  <li>NET35</li>
  <li>NET40</li>
  <li>NET45</li>
  <li>NET451</li>
  <li>NET452</li>
  <li>NET46</li>
  <li>NET461</li>
  <li>NET462</li>
  <li>NET47</li>
  <li>NET471</li>
  <li>NET472</li>
</ul>

<h3 id="net-standard-1">.NET Standard</h3>

<ul>
  <li>NETSTANDARD1_0</li>
  <li>NETSTANDARD1_1</li>
  <li>NETSTANDARD1_2</li>
  <li>NETSTANDARD1_3</li>
  <li>NETSTANDARD1_4</li>
  <li>NETSTANDARD1_5</li>
  <li>NETSTANDARD1_6</li>
  <li>NETSTANDARD2_0</li>
</ul>

<h3 id="net-core-1">.NET Core</h3>

<ul>
  <li>NETCOREAPP1_0</li>
  <li>NETCOREAPP1_1</li>
  <li>NETCOREAPP2_0</li>
  <li>NETCOREAPP2_1</li>
</ul>

<p>æ›´å¤šå®ç»†èŠ‚è¯·çœ‹ <a href="https://blog.lindexi.com/post/dotnet-%E6%96%B0%E9%A1%B9%E7%9B%AE%E6%A0%BC%E5%BC%8F%E4%B8%8E%E5%AF%B9%E5%BA%94%E6%A1%86%E6%9E%B6%E9%A2%84%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AE%8F.html">dotnet æ–°é¡¹ç›®æ ¼å¼ä¸å¯¹åº”æ¡†æ¶é¢„å®šä¹‰çš„å®</a></p>

<p>å‚è§ï¼š<a href="https://walterlv.github.io/post/configure-projects-to-target-multiple-platforms.html">è®©ä¸€ä¸ª csproj é¡¹ç›®æŒ‡å®šå¤šä¸ªå¼€å‘æ¡†æ¶ - walterlv</a></p>

<h2 id="è¿ç§»-wpf-é¡¹ç›®">è¿ç§» WPF é¡¹ç›®</h2>

<p>å¦‚æœéœ€è¦è¿ç§» WPF é¡¹ç›®ï¼Œé‚£ä¹ˆå…ˆè®°ä¸‹è‡ªå·±çš„å¼•ç”¨ï¼Œæœ€å¥½æ˜¯æˆªå›¾ï¼Œç„¶åå¸è½½é¡¹ç›®ã€‚ç¼–è¾‘é¡¹ç›®æ–‡ä»¶ï¼Œä½¿ç”¨ä¸‹é¢çš„ä»£ç ä»£æ›¿</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span> <span class="na">ToolsVersion=</span><span class="s">"15.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;LanguageTargets&gt;</span>$(MSBuildToolsPath)\Microsoft.CSharp.targets<span class="nt">&lt;/LanguageTargets&gt;</span>
    <span class="nt">&lt;TargetFrameworks&gt;</span>net45;<span class="nt">&lt;/TargetFrameworks&gt;</span>
    <span class="nt">&lt;OutputType&gt;</span>WinExe<span class="nt">&lt;/OutputType&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>
 
  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;Compile</span> <span class="na">Update=</span><span class="s">"**\*.xaml.cs"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;DependentUpon&gt;</span>%(Filename)<span class="nt">&lt;/DependentUpon&gt;</span>
    <span class="nt">&lt;/Compile&gt;</span>
    <span class="nt">&lt;Page</span> <span class="na">Include=</span><span class="s">"**\*.xaml"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;SubType&gt;</span>Designer<span class="nt">&lt;/SubType&gt;</span>
      <span class="nt">&lt;Generator&gt;</span>MSBuild:Compile<span class="nt">&lt;/Generator&gt;</span>
    <span class="nt">&lt;/Page&gt;</span>

    <span class="nt">&lt;Resource</span> <span class="na">Include=</span><span class="s">"**\*.png"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Resource</span> <span class="na">Include=</span><span class="s">"**\*.jpg"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Resource</span> <span class="na">Include=</span><span class="s">"**\*.cur"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Resource</span> <span class="na">Include=</span><span class="s">"**\*.ps"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;None</span> <span class="na">Include=</span><span class="s">"**\*.fx"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;None</span> <span class="na">Include=</span><span class="s">"**\*.md"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;None</span> <span class="na">Include=</span><span class="s">"**\*.ruleset"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>
 
  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System.Data"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System.Xml"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"Microsoft.CSharp"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System.Core"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System.Xml.Linq"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System.Data.DataSetExtensions"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System.Net.Http"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"System.Xaml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"WindowsBase"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"PresentationCore"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Reference</span> <span class="na">Include=</span><span class="s">"PresentationFramework"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>
<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>ä¿å­˜é‡æ–°åŠ è½½ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹å¹³å°ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨ net45 ï¼Œå¤§å®¶æŒ‰ç…§åŸæ¥çš„éœ€è¦ä¿®æ”¹ã€‚</p>

<p>çœ‹ä¸€ä¸‹ç¼ºå°‘äº†å“ªäº›å¼•ç”¨å†è‡ªå·±æ·»åŠ ã€‚</p>

<p>ç¨å¾®è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œåœ¨ä¸€å¼€å§‹ä½¿ç”¨çš„ OutputType æ˜¯å‘Šè¯‰ VisualStudio ç”Ÿæˆä¸€ä¸ªçª—å£åº”ç”¨ç¨‹åºã€‚å› ä¸ºé»˜è®¤ç”Ÿæˆçš„æ˜¯ dll ï¼Œè€Œåœ¨æœ¬æ–‡ä¸Šé¢ä¹Ÿå‘Šè¯‰å¤§å®¶è®¾ç½®æ§åˆ¶å°è¾“å‡ºæ˜¯ä½¿ç”¨ä¸‹é¢ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">&lt;</span><span class="n">OutputType</span><span class="p">&gt;</span><span class="n">Exe</span><span class="p">&lt;/</span><span class="n">OutputType</span><span class="p">&gt;</span>

</code></pre></div></div>

<p>å¯¹äº WPF æ˜¯çª—å£ç¨‹åºï¼Œå¦‚æœä½¿ç”¨äº†ä¸Šé¢çš„è®¾ç½®ï¼Œå°±ä¼šåœ¨å¯åŠ¨çš„è¿‡ç¨‹å…ˆå‡ºç°æ§åˆ¶å°çª—å£ï¼Œç„¶ååœ¨æ˜¾ç¤ºä¸»ç•Œé¢ã€‚ä¸ºäº†è®© WPF çª—å£ç›´æ¥æ˜¾ç¤ºè€Œä¸æ˜¯å…ˆæ˜¾ç¤ºæ§åˆ¶å°çª—å£ï¼Œéœ€è¦æŠŠä¸Šé¢ä»£ç ä¿®æ”¹ä¸º</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">&lt;</span><span class="n">OutputType</span><span class="p">&gt;</span><span class="n">WinExe</span><span class="p">&lt;/</span><span class="n">OutputType</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæ­¤æ—¶æç¤ºæ‰¾ä¸åˆ° App.xaml è¯·åœ¨ csproj æ·»åŠ ä¸‹é¢ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">&lt;</span><span class="n">ApplicationDefinition</span> <span class="n">Include</span><span class="p">=</span><span class="s">"App.xaml"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">Generator</span><span class="p">&gt;</span><span class="n">MSBuild</span><span class="p">:</span><span class="n">Compile</span><span class="p">&lt;/</span><span class="n">Generator</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">SubType</span><span class="p">&gt;</span><span class="n">Designer</span><span class="p">&lt;/</span><span class="n">SubType</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="n">ApplicationDefinition</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>åœ¨ WPF è¿˜æœ‰å¾ˆå¤šçª—å£é¡µé¢ï¼Œè¿™äº›ä»£ç ä½¿ç”¨ xaml æ¥å†™ï¼Œéœ€è¦æŠŠ xaml å’Œ xaml.cs å¯¹åº”ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ä¸‹é¢ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">&lt;</span><span class="n">Compile</span> <span class="n">Update</span><span class="p">=</span><span class="s">"**\*.xaml.cs"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">DependentUpon</span><span class="p">&gt;%(</span><span class="n">Filename</span><span class="p">)&lt;/</span><span class="n">DependentUpon</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="n">Compile</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">Page</span> <span class="n">Include</span><span class="p">=</span><span class="s">"**\*.xaml"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">SubType</span><span class="p">&gt;</span><span class="n">Designer</span><span class="p">&lt;/</span><span class="n">SubType</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">Generator</span><span class="p">&gt;</span><span class="n">MSBuild</span><span class="p">:</span><span class="n">Compile</span><span class="p">&lt;/</span><span class="n">Generator</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="n">Page</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>ä¸Šé¢è¿™ä¸ªä»£ç çš„æ„æ€æ˜¯å¯¹äº xaml æ–‡ä»¶çš„ç¼–è¯‘å’ŒæŠ˜å ï¼Œå¦‚æŠ˜å   Foo.xaml å’Œ Foo.xaml.cs æ–‡ä»¶ã€‚ç°åœ¨å¯¹äº UWP é¡¹ç›®ï¼Œä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ˜¯ç¼–è¯‘ä¸é€šè¿‡ã€‚å¦‚æœéœ€è¦æ”¯æŒ UWP çš„ VisualStudio 2017 é¡¹ç›®æ ¼å¼ï¼Œè¯·çœ‹ <a href="https://walterlv.github.io/post/use-msbuild-sdk-extras-for-wpf-and-uwp.html">æ–° csproj å¯¹ WPF/UWP æ”¯æŒä¸å¤ªå¥½ï¼Ÿæœ‰ç¬¬ä¸‰æ–¹ SDK å¯ä»¥ç”¨ï¼MSBuild.Sdk.Extras - walterlv</a>ã€‚å¦‚æœä¸æƒ³ç‚¹å‡»ç½‘ç«™ï¼Œé‚£ä¹ˆå°±è¯·çœ‹ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">Project</span> <span class="n">Sdk</span><span class="p">=</span><span class="s">"MSBuild.Sdk.Extras/1.5.4"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="n">PropertyGroup</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">TargetFrameworks</span><span class="p">&gt;</span><span class="n">net47</span><span class="p">;</span><span class="n">uap10</span><span class="p">.</span><span class="m">0</span><span class="p">&lt;/</span><span class="n">TargetFrameworks</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="n">PropertyGroup</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">Project</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>ç°åœ¨å®˜æ–¹æ”¯æŒä½¿ç”¨ä¸‹é¢ä»£ç è¿ç§» WPF é¡¹ç›®</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk.WindowsDesktop"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;OutputType&gt;</span>WinExe<span class="nt">&lt;/OutputType&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>netcoreapp3.1<span class="nt">&lt;/TargetFramework&gt;</span>
    <span class="nt">&lt;UseWPF&gt;</span>true<span class="nt">&lt;/UseWPF&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>æ ¸å¿ƒæ˜¯ <code class="language-plaintext highlighter-rouge">Sdk="Microsoft.NET.Sdk.WindowsDesktop"</code> å’Œ <code class="language-plaintext highlighter-rouge">&lt;UseWPF&gt;true&lt;/UseWPF&gt;</code> ä¸¤å¥è¯</p>

<p>å¦‚æœéœ€è¦å¼•ç”¨ WinForms é¡¹ç›®ï¼Œè¯·æ·»åŠ  UseWindowsForms å±æ€§</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;UseWindowsForms&gt;</span>true<span class="nt">&lt;/UseWindowsForms&gt;</span>
</code></pre></div></div>

<p>æŠŠé¡¹ç›®æ–‡ä»¶ä¿®æ”¹ä¸ºä¸Šé¢çš„ä»£ç å°±å¯ä»¥æ”¯æŒ dotnet 4.7 å’Œ UWP é¡¹ç›®</p>

<h2 id="åœ¨æ–°-sdk-style-é£æ ¼-csproj-é¡¹ç›®æ ¼å¼æ–‡ä»¶ä½¿ç”¨-wpf-å’Œ-winforms-å¼•ç”¨">åœ¨æ–° SDK Style é£æ ¼ csproj é¡¹ç›®æ ¼å¼æ–‡ä»¶ä½¿ç”¨ WPF å’Œ WinForms å¼•ç”¨</h2>

<p>å¦‚ä¸Šé¢æè¿°ï¼Œåœ¨æ·»åŠ äº† .NET Core 3.1 å’Œä»¥ä¸‹ç‰ˆæœ¬æˆ– .NET Framework ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">Microsoft.NET.Sdk.WindowsDesktop</code> æ„å»º</p>

<p>å¦‚æœæœ‰ .NET 5 çš„å¼•ç”¨æ”¯æŒï¼Œè¯·ä½¿ç”¨ net5.0-windows æ¡†æ¶ï¼Œäºæ˜¯ä¸€ä¸ªå¤šæ¡†æ¶æ”¯æŒçš„é¡¹ç›®æ ¼å¼ï¼ŒåŒæ—¶å¼•ç”¨ WPF å’Œ WinForms çš„æ–° SDK Style é£æ ¼çš„é¡¹ç›®æ ¼å¼æ–‡ä»¶å†…å®¹å¯ä»¥æ˜¯å¦‚ä¸‹</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk.WindowsDesktop"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;OutputType&gt;</span>WinExe<span class="nt">&lt;/OutputType&gt;</span>
    <span class="nt">&lt;TargetFrameworks&gt;</span>netcoreapp3.1;net5-windows<span class="nt">&lt;/TargetFrameworks&gt;</span>
    <span class="nt">&lt;UseWPF&gt;</span>true<span class="nt">&lt;/UseWPF&gt;</span>
    <span class="nt">&lt;UseWindowsForms&gt;</span>true<span class="nt">&lt;/UseWindowsForms&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>å‚è§ï¼š<a href="http://www.natemcmaster.com/blog/2017/03/09/vs2015-to-vs2017-upgrade/">Old csproj to new csproj: Visual Studio 2017 upgrade guide</a></p>

<p><a href="https://walterlv.github.io/post/introduce-new-style-csproj-into-net-framework.html">å°† WPFã€UWP ä»¥åŠå…¶ä»–å„ç§ç±»å‹çš„æ—§æ ·å¼çš„ csproj æ–‡ä»¶è¿ç§»æˆæ–°æ ·å¼çš„ csproj æ–‡ä»¶ - walterlv</a></p>

:ET