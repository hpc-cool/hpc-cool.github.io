I"ìT<p>æœ¬æ–‡å‘Šè¯‰å¤§å®¶å¦‚ä½•ä½¿ç”¨é™„åŠ å±æ€§ä¿®æ”¹æŒ‰é’®æŒ‰ä¸‹å»æ—¶çš„èƒŒæ™¯</p>

<!--more-->

<!-- CreateTime:2018/8/10 19:16:53 -->

<p>å…ˆè®©å¤§å®¶çœ‹ä¸ªå›¾ç‰‡ï¼Œä¸‹é¢æ¥å‘Šè¯‰å¤§å®¶å¦‚ä½•åš</p>

<p><img src="http://image.acmx.xyz/65fb6078-c169-4ce3-cdd9-e35752d07be0%2F%25E7%2582%25B9%25E5%2587%25BB%25E4%25BF%25AE%25E6%2594%25B9%25E6%258C%2589%25E9%2592%25AE.gif" alt="" /></p>

<p>é¦–å…ˆåœ¨åå°åˆ›å»ºä¸€ä¸ªé™„åŠ å±æ€§</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">ButtonBrush</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">DependencyProperty</span> <span class="n">ButtonPressBackgroundProperty</span> <span class="p">=</span> <span class="n">DependencyProperty</span><span class="p">.</span><span class="nf">RegisterAttached</span><span class="p">(</span>
            <span class="s">"ButtonPressBackground"</span><span class="p">,</span> <span class="k">typeof</span><span class="p">(</span><span class="n">Brush</span><span class="p">),</span> <span class="k">typeof</span><span class="p">(</span><span class="n">ButtonBrush</span><span class="p">),</span> <span class="k">new</span> <span class="nf">PropertyMetadata</span><span class="p">(</span><span class="k">default</span><span class="p">(</span><span class="n">Brush</span><span class="p">)));</span>

        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SetButtonPressBackground</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">element</span><span class="p">,</span> <span class="n">Brush</span> <span class="k">value</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">element</span><span class="p">.</span><span class="nf">SetValue</span><span class="p">(</span><span class="n">ButtonPressBackgroundProperty</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">static</span> <span class="n">Brush</span> <span class="nf">GetButtonPressBackground</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">element</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">Brush</span><span class="p">)</span> <span class="n">element</span><span class="p">.</span><span class="nf">GetValue</span><span class="p">(</span><span class="n">ButtonPressBackgroundProperty</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

</code></pre></div></div>

<p>ç„¶ååœ¨ xaml ä½¿ç”¨é™„åŠ å±æ€§</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">&lt;</span><span class="n">Button</span> <span class="n">Margin</span><span class="p">=</span><span class="s">"10,10,10,10"</span> 
                <span class="n">Width</span><span class="p">=</span><span class="s">"300"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"100"</span>
                <span class="n">Content</span><span class="p">=</span><span class="s">"ç¡®å®š"</span>
                <span class="n">local</span><span class="p">:</span><span class="n">ButtonBrush</span><span class="p">.</span><span class="n">ButtonPressBackground</span><span class="p">=</span><span class="s">"#FFfcac1c"</span> <span class="p">/&gt;</span>
</code></pre></div></div>

<p>å¦‚ä½•åœ¨æŒ‰é’®æŒ‰ä¸‹æ—¶ä½¿ç”¨è¿™ä¸ªé™„åŠ å±æ€§ä¿®æ”¹æŒ‰é’®é¢œè‰²ï¼Ÿå®é™…é‡å†™æŒ‰é’®çš„æ ·å¼å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŒ‰ä¸‹æ—¶å¯ä»¥ä¿®æ”¹é¢œè‰²</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">&lt;</span><span class="n">Style</span> <span class="n">x</span><span class="p">:</span><span class="n">Key</span><span class="p">=</span><span class="s">"Style.OkOperationButton"</span>
               <span class="n">TargetType</span><span class="p">=</span><span class="s">"ButtonBase"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Width"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"110"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Height"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"44"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"FontSize"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"24"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Background"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#FF0087FF"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"HorizontalContentAlignment"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"Center"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"VerticalContentAlignment"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"Center"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Template"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="n">Setter</span><span class="p">.</span><span class="n">Value</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="n">ControlTemplate</span> <span class="n">TargetType</span><span class="p">=</span><span class="s">"{x:Type ButtonBase}"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="n">Border</span> <span class="n">x</span><span class="p">:</span><span class="n">Name</span><span class="p">=</span><span class="s">"Border"</span> <span class="n">Width</span><span class="p">=</span><span class="s">"{TemplateBinding Width}"</span>
                                <span class="n">Height</span><span class="p">=</span><span class="s">"{TemplateBinding Height}"</span>
                                <span class="n">CornerRadius</span><span class="p">=</span><span class="s">"22"</span> <span class="n">Background</span><span class="p">=</span><span class="s">"{TemplateBinding Background}"</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="n">TextBlock</span> <span class="n">x</span><span class="p">:</span><span class="n">Name</span><span class="p">=</span><span class="s">"TextBlock"</span>
                                       <span class="n">Text</span><span class="p">=</span><span class="s">"{TemplateBinding Content}"</span>
                                       <span class="n">FontSize</span><span class="p">=</span><span class="s">"{TemplateBinding FontSize}"</span>
                                       <span class="n">HorizontalAlignment</span><span class="p">=</span><span class="s">"{TemplateBinding HorizontalContentAlignment}"</span>
                                       <span class="n">VerticalAlignment</span><span class="p">=</span><span class="s">"{TemplateBinding VerticalContentAlignment}"</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;/</span><span class="n">Border</span><span class="p">&gt;</span>

                        <span class="p">&lt;</span><span class="n">ControlTemplate</span><span class="p">.</span><span class="n">Triggers</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="n">Trigger</span> <span class="n">Property</span><span class="p">=</span><span class="s">"IsPressed"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"True"</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Background"</span>
                                        <span class="n">Value</span><span class="p">=</span><span class="s">"#FFfcac1c"</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">TargetName</span><span class="p">=</span><span class="s">"TextBlock"</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Foreground"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#FFFFFFFF"</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;/</span><span class="n">Trigger</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="n">Trigger</span> <span class="n">Property</span><span class="p">=</span><span class="s">"IsEnabled"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"False"</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">TargetName</span><span class="p">=</span><span class="s">"Border"</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Background"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#4D0087FF"</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">TargetName</span><span class="p">=</span><span class="s">"TextBlock"</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Foreground"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#4DFFFFFF"</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;/</span><span class="n">Trigger</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="n">ControlTemplate</span><span class="p">.</span><span class="n">Triggers</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="n">ControlTemplate</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="n">Setter</span><span class="p">.</span><span class="n">Value</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="n">Setter</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">Style</span><span class="p">&gt;</span>

</code></pre></div></div>

<p>é‚£ä¹ˆå¦‚ä½•åœ¨è®¾ç½®ä½¿ç”¨é™„åŠ å±æ€§ï¼Œå®é™…ä¸Šä½¿ç”¨ä¸‹é¢çš„ä»£ç ç›´æ¥ä»æŒ‰é’®è·å–é™„åŠ å±æ€§</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                  <span class="p">&lt;</span><span class="n">Trigger</span> <span class="n">Property</span><span class="p">=</span><span class="s">"IsPressed"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"True"</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Background"</span>
                                        <span class="n">Value</span><span class="p">=</span><span class="s">"{Binding RelativeSource = {RelativeSource Self},Path=(local:ButtonBrush.ButtonPressBackground)}"</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">TargetName</span><span class="p">=</span><span class="s">"TextBlock"</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Foreground"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#FFFFFFFF"</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;/</span><span class="n">Trigger</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>æ‰€æœ‰çš„ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="p">&lt;</span><span class="n">Window</span><span class="p">.</span><span class="n">Resources</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="n">Style</span> <span class="n">x</span><span class="p">:</span><span class="n">Key</span><span class="p">=</span><span class="s">"Style.OkOperationButton"</span>
               <span class="n">TargetType</span><span class="p">=</span><span class="s">"ButtonBase"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Width"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"110"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Height"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"44"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"FontSize"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"24"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Background"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#FF0087FF"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"HorizontalContentAlignment"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"Center"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"VerticalContentAlignment"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"Center"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Template"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="n">Setter</span><span class="p">.</span><span class="n">Value</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="n">ControlTemplate</span> <span class="n">TargetType</span><span class="p">=</span><span class="s">"{x:Type ButtonBase}"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="n">Border</span> <span class="n">x</span><span class="p">:</span><span class="n">Name</span><span class="p">=</span><span class="s">"Border"</span> <span class="n">Width</span><span class="p">=</span><span class="s">"{TemplateBinding Width}"</span>
                                <span class="n">Height</span><span class="p">=</span><span class="s">"{TemplateBinding Height}"</span>
                                <span class="n">CornerRadius</span><span class="p">=</span><span class="s">"22"</span> <span class="n">Background</span><span class="p">=</span><span class="s">"{TemplateBinding Background}"</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="n">TextBlock</span> <span class="n">x</span><span class="p">:</span><span class="n">Name</span><span class="p">=</span><span class="s">"TextBlock"</span>
                                       <span class="n">Text</span><span class="p">=</span><span class="s">"{TemplateBinding Content}"</span>
                                       <span class="n">FontSize</span><span class="p">=</span><span class="s">"{TemplateBinding FontSize}"</span>
                                       <span class="n">HorizontalAlignment</span><span class="p">=</span><span class="s">"{TemplateBinding HorizontalContentAlignment}"</span>
                                       <span class="n">VerticalAlignment</span><span class="p">=</span><span class="s">"{TemplateBinding VerticalContentAlignment}"</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;/</span><span class="n">Border</span><span class="p">&gt;</span>

                        <span class="p">&lt;</span><span class="n">ControlTemplate</span><span class="p">.</span><span class="n">Triggers</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="n">Trigger</span> <span class="n">Property</span><span class="p">=</span><span class="s">"IsPressed"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"True"</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Background"</span>
                                        <span class="n">Value</span><span class="p">=</span><span class="s">"{Binding RelativeSource = {RelativeSource Self},Path=(local:ButtonBrush.ButtonPressBackground)}"</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">TargetName</span><span class="p">=</span><span class="s">"TextBlock"</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Foreground"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#FFFFFFFF"</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;/</span><span class="n">Trigger</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="n">Trigger</span> <span class="n">Property</span><span class="p">=</span><span class="s">"IsEnabled"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"False"</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">TargetName</span><span class="p">=</span><span class="s">"Border"</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Background"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#4D0087FF"</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;</span><span class="n">Setter</span> <span class="n">TargetName</span><span class="p">=</span><span class="s">"TextBlock"</span> <span class="n">Property</span><span class="p">=</span><span class="s">"Foreground"</span> <span class="n">Value</span><span class="p">=</span><span class="s">"#4DFFFFFF"</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;/</span><span class="n">Trigger</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="n">ControlTemplate</span><span class="p">.</span><span class="n">Triggers</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="n">ControlTemplate</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="n">Setter</span><span class="p">.</span><span class="n">Value</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="n">Setter</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">Style</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="n">Window</span><span class="p">.</span><span class="n">Resources</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">Grid</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="n">Button</span> <span class="n">Margin</span><span class="p">=</span><span class="s">"10,10,10,10"</span> <span class="n">Style</span><span class="p">=</span><span class="s">"{StaticResource Style.OkOperationButton}"</span>
                <span class="n">Width</span><span class="p">=</span><span class="s">"300"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"100"</span>
                <span class="n">Content</span><span class="p">=</span><span class="s">"ç¡®å®š"</span>
                <span class="n">local</span><span class="p">:</span><span class="n">ButtonBrush</span><span class="p">.</span><span class="n">ButtonPressBackground</span><span class="p">=</span><span class="s">"#FFfcac1c"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="n">Grid</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>ä»£ç ï¼š<a href="http://lindexi.ml:8080/index.php/s/OcKrBbMufXoJAXW">ä¸‹è½½</a></p>

:ET