I"ó<p>æœ¬æ–‡å‘Šè¯‰å¤§å®¶å¦‚æœé‡åˆ° double æ•°ç»„è½¬ float æ•°ç»„åƒä¸‡ä¸è¦ä½¿ç”¨ Cast ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨ select å¼ºè½¬ã€‚</p>

<!--more-->

<!-- CreateTime:2018/12/25 9:27:46 -->

<!-- æ ‡ç­¾ï¼šC#,dotnet -->

<p>æœ€è¿‘åœ¨å¼€å‘<a href="https://github.com/AvaloniaUI/Avalonia">Avalonia</a> ï¼Œæœ‰å¤§ç¥å‘Šè¯‰æˆ‘ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥è¿™æ ·å†™</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dashes</span> <span class="p">=</span> <span class="n">pen</span><span class="p">.</span><span class="n">DashStyle</span><span class="p">.</span><span class="n">Dashes</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">x</span><span class="p">).</span><span class="nf">ToArray</span><span class="p">();</span>

</code></pre></div></div>

<p>ä¿®æ”¹ä¸º</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dashes</span> <span class="p">=</span> <span class="n">pen</span><span class="p">.</span><span class="n">DashStyle</span><span class="p">.</span><span class="n">Dashes</span><span class="p">.</span><span class="n">Cast</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;.</span><span class="nf">ToArray</span><span class="p">()</span>
</code></pre></div></div>

<p><a href="https://github.com/AvaloniaUI/Avalonia/pull/1472">Improve tiny performance</a></p>

<p>ä½†æ˜¯å®é™…ä¸Šä¸èƒ½è¿™æ ·å†™ï¼Œå› ä¸º cast æ— æ³•è½¬æ¢ float å’Œ double å› ä¸ºä¸å­˜åœ¨ä¸€ä¸ªç±»åŒæ—¶ç»§æ‰¿ float å’Œ double ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨è¿™ä¸ªæ–¹æ³•è½¬æ¢ï¼Œå°±æ— æ³•è¿è¡Œ</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">System</span><span class="p">.</span><span class="n">InvalidCastException</span><span class="p">:</span><span class="err">â€œ</span><span class="n">Unable</span> <span class="n">to</span> <span class="n">cast</span> <span class="kt">object</span> <span class="n">of</span> <span class="n">type</span> <span class="err">'</span><span class="n">System</span><span class="p">.</span><span class="n">Double</span><span class="err">'</span> <span class="n">to</span> <span class="n">type</span> <span class="err">'</span><span class="n">System</span><span class="p">.</span><span class="n">Single</span><span class="err">'</span><span class="p">.</span><span class="err">â€</span>
</code></pre></div></div>

<p>æ‰€ä»¥å»ºè®®çš„æ–¹æ³•æ˜¯ä½¿ç”¨ select ï¼Œåœ¨é‡Œé¢å¼ºè½¬ã€‚</p>

<p>å°è¯•è¿è¡Œä¸‹é¢ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="n">List</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">&gt;</span> <span class="n">titHruxvrvaa</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">&gt;()</span>
            <span class="p">{</span>
                <span class="m">1d</span><span class="p">,</span>
                <span class="m">2d</span><span class="p">,</span>
                <span class="m">3d</span>
            <span class="p">};</span>

            <span class="kt">var</span> <span class="n">traStqjq</span> <span class="p">=</span> <span class="n">titHruxvrvaa</span><span class="p">.</span><span class="n">Cast</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;().</span><span class="nf">ToArray</span><span class="p">();</span><span class="c1">//System.InvalidCastException:â€œUnable to cast object of type 'System.Double' to type 'System.Single'.â€</span>

            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">temp</span> <span class="k">in</span> <span class="n">traStqjq</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
            <span class="p">}</span>
</code></pre></div></div>

:ET