I"<p>本文实际只是翻译  .NET Core foundational libraries 官方文档的编码风格。</p>

<!--more-->

<!-- CreateTime:2018/8/10 19:16:52 -->

<p>在 <a href="https://github.com/dotnet/corefx">.NET Core foundational libraries</a>项目使用的编程规范默认就是 VisualStudio 默认样式。</p>

<h2 id="花括号">花括号</h2>

<p>花括号使用  Allman style 风格，所有的花括号在新的一行开始。</p>

<p>关于 Allman style 就是如下，花括号放在下一行，而且花括号不进行缩进，花括号里面的代码缩进。</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="p">(</span><span class="n">x</span> <span class="p">==</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">something</span><span class="p">();</span>
    <span class="nf">somethingelse</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>但是对于单行的语句，可以不添加花括号，但是请把它放在同一行</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>          <span class="k">if</span> <span class="p">(</span><span class="n">xx</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">xx</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Foo</span><span class="p">();</span>
</code></pre></div></div>

<p>单行语句同样建议添加花括号避免<a href="https://www.imperialviolet.org/2014/02/22/applebug.html">苹果</a>的bug</p>

<p>如果不添加花括号，一定不要在嵌套时使用。</p>

<h2 id="空格">空格</h2>

<p>使用 4 个空格作为一个缩进，而不是使用 tab</p>

<h2 id="字段">字段</h2>

<p>所有的字段使用<code class="language-plaintext highlighter-rouge">_camelCase</code>风格，而且尽可能使用<code class="language-plaintext highlighter-rouge">readonly </code>。在 internal 和 private 访问的字段添加 <code class="language-plaintext highlighter-rouge">_</code> 前缀，对于静态的字段添加<code class="language-plaintext highlighter-rouge">s_</code>前缀，对于线程静态的字段添加<code class="language-plaintext highlighter-rouge">t_</code>前缀。如果使用了静态的字段而且可以设置<code class="language-plaintext highlighter-rouge">readonly </code>，需要把<code class="language-plaintext highlighter-rouge">readonly </code>放在<code class="language-plaintext highlighter-rouge">static</code>后面。</p>

<p>最好不要公开字段，如果需要公开那么使用PascalCasing风格而且不添加前缀。</p>

<p>我不是很赞同对字段的风格，但是因为本文是翻译，我就没有添加自己的理解。</p>

<h2 id="限定">限定</h2>

<p>不要添加 <code class="language-plaintext highlighter-rouge">this.</code> ，完全是没必要的。</p>

<p>我也不是很赞同这个，因为如果使用扩展方法，需要使用<code class="language-plaintext highlighter-rouge">this.</code></p>

<h2 id="访问">访问</h2>

<p>显示指定访问，即使访问是默认的，如<code class="language-plaintext highlighter-rouge">private string _foo</code> ，而不是<code class="language-plaintext highlighter-rouge">string _foo</code>。访问需要放在最前面，如<code class="language-plaintext highlighter-rouge">public abstract</code>，不建议<code class="language-plaintext highlighter-rouge">abstract public</code></p>

<p>默认的访问是可能修改的</p>

<h2 id="命名空间">命名空间</h2>

<p>对于引用需要放在文件的开头。</p>

<h2 id="空行">空行</h2>

<p>禁止超过一行的空白，不可以使用两行空白。</p>

<p>不要使用两行分割两个类型。</p>

<h2 id="多余空格">多余空格</h2>

<p>禁止在一行结束添加多余空格。通过 VisualStudio 的查看空格(ctrl+E,S)可以看到空格</p>

<h2 id="参照现有">参照现有</h2>

<p>如果一个文件在格式规范定义之前已经有自己的规范，尽可能参照文件现有的规范而不是去修改他。</p>

<p>新的修改参照现有的文件的格式。</p>

<p>我一点都不赞同。</p>

<h2 id="明显的类型">明显的类型</h2>

<p>只能在明显可以知道对象类型可以使用 var ，如<code class="language-plaintext highlighter-rouge">var stream = new FileStream(...)</code> 。在无法明显知道对象类型不可以使用 var ，如<code class="language-plaintext highlighter-rouge">var stream = OpenStandardInput()</code> 。</p>

<h2 id="关键字">关键字</h2>

<p>使用语言的关键字代替 BCL 类型，如使用 <code class="language-plaintext highlighter-rouge">int, string, float</code>代替<code class="language-plaintext highlighter-rouge">Int32</code>，<code class="language-plaintext highlighter-rouge">String</code>，<code class="language-plaintext highlighter-rouge">Single</code></p>

<h2 id="常量命名">常量命名</h2>

<p>对于所有的常量，包括静态只读，使用 <code class="language-plaintext highlighter-rouge">PascalCasing</code> 风格。如果需要使用 C++ 或其他代码对于命名有要求才可以使用其他的方法。</p>

<h2 id="变量名字符串">变量名字符串</h2>

<p>如果使用变量名的常量，必须使用 <code class="language-plaintext highlighter-rouge">nameof</code> 关键字。</p>

<h2 id="字段结构">字段结构</h2>

<p>字段必须放在一个类声明的最前面。</p>

<p>我一点都不赞成，因为谁会去管一个类的字段，我关心的是构造函数和公开属性、函数。</p>

<h2 id="其他字符">其他字符</h2>

<p>如果在代码使用了 非 ascii 的字符，那么需要把他转换为 <code class="language-plaintext highlighter-rouge">\uxx</code> 方式，这样可以解决一些非 ascii 因为编译器分析的问题。</p>

<p>当然上面的要求只是对于编译的代码</p>

<h2 id="label">Label</h2>

<p>使用 Label 缩进一个小于当前缩进的标签</p>

<p>原文：<a href="https://github.com/dotnet/corefx/blob/master/Documentation/coding-guidelines/coding-style.md">coding-style.md</a></p>

<p><img src="http://image.acmx.xyz/lindexi%2F2018571237288065.jpg" alt="" /></p>

:ET