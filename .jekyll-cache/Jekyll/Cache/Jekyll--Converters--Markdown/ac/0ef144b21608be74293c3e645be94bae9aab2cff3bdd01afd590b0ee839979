I"ú9<p>åœ¨ä½¿ç”¨ InkCanvas çš„è¿‡ç¨‹ï¼Œæ— æ³•ç›´æ¥é€šè¿‡ Pointer æ¶ˆæ¯æ‹¿åˆ°ä¹¦å†™ç§»åŠ¨ï¼Œéœ€è¦ä½¿ç”¨ StrokeInput æ‰èƒ½è·å–åˆ°</p>

<!--more-->

<!-- CreateTime:2019/7/15 8:58:05 -->

<!-- csdn -->

<p>åœ¨ InkCanvas.InkPresenter.StrokeInput æä¾›äº† <a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking.inkstrokeinput.strokestarted">StrokeStarted</a> ã€<a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking.inkstrokeinput.strokecontinued">StrokeContinued</a> ã€<a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking.inkstrokeinput.strokeended">StrokeEnded</a> è¿™äº›çœ‹åå­—å°±çŸ¥é“æ˜¯å¹²ä»€ä¹ˆç”¨çš„äº‹ä»¶ï¼Œé€šè¿‡è¿™äº›äº‹ä»¶å¯ä»¥åœ¨ä¹¦å†™çš„è¿‡ç¨‹æ‹¿åˆ°è§¦æ‘¸äº‹ä»¶æˆ–é¼ æ ‡äº‹ä»¶</p>

<p>ä½¿ç”¨ StrokeContinued ä½œä¸ºä¾‹å­ï¼Œå…ˆåœ¨ XAML ç•Œé¢æ”¾ä¸€ä¸ª InkCanvas æ§ä»¶ï¼ŒåŒæ—¶ä¿®æ”¹ä»–çš„å±æ€§åæ˜¯ InkCanvas åœ¨åå°ä»£ç å¯ä»¥è¿™æ ·å†™</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="n">InkCanvas</span><span class="p">.</span><span class="n">InkPresenter</span><span class="p">.</span><span class="n">StrokeInput</span><span class="p">.</span><span class="n">StrokeContinued</span> <span class="p">+=</span> <span class="n">StrokeContinued</span><span class="p">;</span>

</code></pre></div></div>

<p>æ‹¿åˆ°çš„StrokeContinuedæ˜¯PointerEventArgså¯ä»¥æ‹¿åˆ°å¾ˆå¤šä¿¡æ¯</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">public</span> <span class="k">void</span> <span class="nf">StrokeContinued</span><span class="p">(</span><span class="n">InkStrokeInput</span> <span class="n">sender</span><span class="p">,</span> <span class="n">PointerEventArgs</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
           
        <span class="p">}</span>
</code></pre></div></div>

<p>åœ¨ Win10 çš„ <a href="https://blogs.windows.com/windowsexperience/2016/08/02/new-video-series-this-week-on-windows-highlights-windows-10-anniversary-update/">Anniversary Update</a> 1607 æä¾›äº† <a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking.core.corewetstrokeupdatesource">CoreWetStrokeUpdateSource</a> å¯ä»¥åœ¨æ¹¿ç¬”è¿¹çš„æ—¶å€™è§¦å‘äº‹ä»¶</p>

<p>åœ¨ <a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking.core.corewetstrokeupdatesource">CoreWetStrokeUpdateSource</a> åŒæ ·æä¾›äº†å¼€å§‹ä¹¦å†™å’Œä¹¦å†™è¿‡ç¨‹ä¸­çš„äº‹ä»¶</p>

<p>å…ˆé€šè¿‡ Create æ–¹æ³•åˆ›å»º CoreWetStrokeUpdateSource è¯·çœ‹ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kt">var</span> <span class="n">coreWetStrokeUpdateSource</span> <span class="p">=</span> <span class="n">CoreWetStrokeUpdateSource</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">inkCanvas</span><span class="p">.</span><span class="n">InkPresenter</span><span class="p">);</span>
</code></pre></div></div>

<p>è¿™ä¸ªäº‹ä»¶æœ‰ä¸€ç‚¹å‘çš„æ˜¯æœ‰åŠ å…¥çš„æ—¶æœºé—®é¢˜ï¼Œè¯·ç¡®ä¿åœ¨æ‰€æœ‰çš„ InkCanvas åŒ…æ‹¬ä»–çš„å®¹å™¨éƒ½ Loaded å®Œæˆä¹‹åæ‰å¯ä»¥ä½¿ç”¨è¿™ä¸ªäº‹ä»¶ï¼Œä¸ç„¶æ˜¯ä¸ä¼šæœ‰è§¦å‘çš„</p>

<p>é€šè¿‡ coreWetStrokeUpdateSource å¯ä»¥æ‹¿åˆ°è§¦æ‘¸æŒ‰ä¸‹å’Œç§»åŠ¨ç­‰äº‹ä»¶</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">coreWetStrokeUpdateSource</span><span class="p">.</span><span class="n">WetStrokeStarting</span> <span class="p">+=</span> <span class="n">CoreWetStrokeUpdateSource_WetStrokeStarting</span><span class="p">;</span>
<span class="n">coreWetStrokeUpdateSource</span><span class="p">.</span><span class="n">WetStrokeContinuing</span> <span class="p">+=</span> <span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span><span class="p">;</span>
<span class="n">coreWetStrokeUpdateSource</span><span class="p">.</span><span class="n">WetStrokeStopping</span> <span class="p">+=</span> <span class="n">CoreWetStrokeUpdateSource_WetStrokeStopping</span><span class="p">;</span>
<span class="n">coreWetStrokeUpdateSource</span><span class="p">.</span><span class="n">WetStrokeCompleted</span> <span class="p">+=</span> <span class="n">CoreWetStrokeUpdateSource_WetStrokeCompleted</span><span class="p">;</span>
</code></pre></div></div>

<p>æˆ‘åœ¨è¿™äº›äº‹ä»¶é‡Œé¢åšè¾“å‡ºï¼Œè¿™æ ·å¯ä»¥çŸ¥é“åœ¨å¤šæŒ‡è§¦æ‘¸ä¸‹çš„äº‹ä»¶æ˜¯å¦‚ä½•è§¦å‘çš„</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">private</span> <span class="k">void</span> <span class="nf">CoreWetStrokeUpdateSource_WetStrokeCompleted</span><span class="p">(</span><span class="n">CoreWetStrokeUpdateSource</span> <span class="n">sender</span><span class="p">,</span>
            <span class="n">CoreWetStrokeUpdateEventArgs</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"CoreWetStrokeUpdateSource_WetStrokeCompleted</span><span class="p">{</span><span class="n">args</span><span class="p">.</span><span class="n">PointerId</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">CoreWetStrokeUpdateSource_WetStrokeStopping</span><span class="p">(</span><span class="n">CoreWetStrokeUpdateSource</span> <span class="n">sender</span><span class="p">,</span>
            <span class="n">CoreWetStrokeUpdateEventArgs</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"WetStrokeStopping</span><span class="p">{</span><span class="n">args</span><span class="p">.</span><span class="n">PointerId</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">CoreWetStrokeUpdateSource_WetStrokeContinuing</span><span class="p">(</span><span class="n">CoreWetStrokeUpdateSource</span> <span class="n">sender</span><span class="p">,</span>
            <span class="n">CoreWetStrokeUpdateEventArgs</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"CoreWetStrokeUpdateSource_WetStrokeContinuing </span><span class="p">{</span><span class="n">args</span><span class="p">.</span><span class="n">PointerId</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">CoreWetStrokeUpdateSource_WetStrokeStarting</span><span class="p">(</span><span class="n">CoreWetStrokeUpdateSource</span> <span class="n">sender</span><span class="p">,</span>
            <span class="n">CoreWetStrokeUpdateEventArgs</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"CoreWetStrokeUpdateSource_WetStrokeStarting</span><span class="p">{</span><span class="n">args</span><span class="p">.</span><span class="n">PointerId</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>è¿è¡Œä»£ç å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„è¾“å‡º</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CoreWetStrokeUpdateSource_WetStrokeStarting</span> <span class="m">1</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">1</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">1</span>
<span class="err">â€¦â€¦</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeStarting</span> <span class="m">2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeStarting</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">1</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">1</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">1</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">1</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="err">â€¦â€¦</span>

<span class="n">CoreWetStrokeUpdateSource_WetStrokeCompleted</span>  <span class="m">1</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeCompleted2</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">3</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeCompleted</span>  <span class="m">3</span>
</code></pre></div></div>

<p>å¯ä»¥ä»è¾“å‡ºçœ‹åˆ°åœ¨å¤šæŒ‡è§¦æ‘¸çš„æ—¶å€™ï¼Œå¯¹æ¯ä¸ªæ‰‹æŒ‡éƒ½ä¼šè§¦å‘ä¸€æ¬¡å®Œæ•´çš„ Starting-Continuing-Completed äº‹ä»¶</p>

<p>é‚£ä¹ˆ CoreWetStrokeUpdateSource å’Œ StrokeContinued çš„åŒºåˆ«åœ¨å“ªï¼Ÿå°±æ˜¯åœ¨äºè§¦å‘çš„å…ˆåé—®é¢˜ï¼Œåœ¨ç¬”è¿¹å¼€å§‹ä¹¦å†™ä¹‹å‰å…ˆè§¦å‘ CoreWetStrokeUpdateSource äº‹ä»¶ï¼Œç„¶ååœ¨ä¹¦å†™å®Œæˆä¹‹åè§¦å‘ StrokeContinued äº‹ä»¶ï¼Œæˆ‘åŒæ—¶è¾“å‡º WetStrokeContinuing å’Œ StrokeContinued äº‹ä»¶ï¼Œè¯·çœ‹ä¸‹é¢</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">StrokeContinued</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">StrokeContinued</span>
<span class="n">StrokeContinued</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">StrokeContinued</span>
<span class="n">StrokeContinued</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">StrokeContinued</span>
<span class="n">StrokeContinued</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">CoreWetStrokeUpdateSource_WetStrokeContinuing</span> <span class="m">9</span>
<span class="n">StrokeContinued</span>
<span class="n">StrokeContinued</span>
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ° WetStrokeContinuing çš„è¾“å‡ºæ—¶æœºå’Œé¢‘ç‡éƒ½ä¼šæ¯” StrokeContinued æ›´é«˜</p>

<p>å¦å¤–æ¨èå¼€æ”¾çš„æ˜¯ StrokeContinued çš„äº‹ä»¶ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ UWP ç¬”è¿¹å°±æ˜¯ä¸ºäº†åšé«˜æ€§èƒ½çš„ç¬”ï¼Œåœ¨ WetStrokeContinuing çš„äº‹ä»¶é‡Œé¢å¦‚æœæ·»åŠ äº†ä¸šåŠ¡ä»£ç ï¼Œé‚£ä¹ˆå°†ä¼šå½±å“ç¬”è¿¹çš„ä¹¦å†™é€Ÿåº¦</p>

<p>åœ¨ UWP çš„ç¬”è¿¹ä¹¦å†™è¿‡ç¨‹ï¼Œéœ€è¦ç­‰å¾… WetStrokeContinuing äº‹ä»¶å®Œæˆä¹‹åæ‰èƒ½è¿›è¡Œç¬”è¿¹æ¸²æŸ“ï¼Œè€Œè°ƒç”¨ StrokeContinued äº‹ä»¶æ˜¯åœ¨ç¬”è¿¹ä¹¦å†™å®Œæˆä¹‹åè°ƒç”¨åŒæ—¶ä¸å¯¹è¿™ä¸ªäº‹ä»¶åšä»»ä½•çš„ç­‰å¾…</p>

<p>åœ¨æ¡†æ¶é‡Œé¢å»ºè®®å¼€æ”¾çš„æ˜¯ StrokeContinued è§¦å‘çš„äº‹ä»¶ï¼Œå‡å°‘æœ‰é€—æ¯”å¼€å‘è€…åœ¨äº‹ä»¶é‡Œé¢å†™äº†ä¸æ¸…çœŸä»£ç é™ä½äº†ç¬”è¿¹çš„æ€§èƒ½</p>

<p><a href="https://www.cnblogs.com/webabcd/p/7242825.html">èƒŒæ°´ä¸€æˆ˜ Windows 10 (61) - æ§ä»¶ï¼ˆåª’ä½“ç±»ï¼‰: InkCanvas æ¶‚é¸¦ç¼–è¾‘ - webabcd - åšå®¢å›­</a></p>

<p><a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking.inkstrokeinput">InkStrokeInput Class (Windows.UI.Input.Inking) - Windows UWP applications</a></p>

<p><a href="https://blog.lindexi.com/post/win10-uwp-%E9%80%9A%E8%BF%87-win2d-%E7%94%BB%E5%87%BA%E7%AC%94%E8%BF%B9.html">win10 uwp é€šè¿‡ win2d ç”»å‡ºç¬”è¿¹</a></p>

<p><a href="https://github.com/mtaulty/GraphPaperControl">mtaulty/GraphPaperControl: Simple user control that uses Win2D to display a tiled grid design.</a></p>

<p><a href="https://blogs.windows.com/buildingapps/2016/08/16/creating-a-custom-ruler-with-directink/">Creating a Custom Ruler with DirectInk - Windows Developer Blog</a></p>

<p><a href="https://github.com/microsoft/Windows-universal-samples/tree/master/Samples/SimpleInk">Windows-universal-samples/Samples/SimpleInk at master Â· microsoft/Windows-universal-samples</a></p>

:ET