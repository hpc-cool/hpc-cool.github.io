I"Ğa<p>æˆ‘ä»¬å‘ç°æˆ‘ä»¬æ— æ³•ç»‘å®šå¯†ç æ¡†çš„å¯†ç ï¼ŒPasswordBox çš„ Password ä¸èƒ½ç»‘å®šã€‚
æˆ‘ä»¬æƒ³åš MVVM ï¼Œæˆ‘ä»¬éœ€è¦ç»‘å®šå¯†ç ï¼Œä¸èƒ½ä½¿ç”¨å‰å° xaml.cs ç›‘å¬ å¯†ç æ”¹å˜å¾—åˆ°å¯†ç çš„å€¼ï¼Œä¼ åˆ° ViewModel ã€‚
æœ¬æ–‡æä¾›ä¸€ä¸ªç®€å•æ–¹æ³•æ¥ç»‘å®š WPF çš„ PasswordBox çš„ Password ã€‚è¿™ç§æ–¹æ³•ä¸ä»…åœ¨ WPF å¯ä»¥ä½¿ç”¨ï¼Œåœ¨ UWP ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚å…³äº UWP ç»‘å®šå¯†ç ï¼Œå¯ä»¥åœ¨æˆ‘åšå®¢ <a href="https://blog.lindexi.com/post/win10-uwp-%E7%BB%91%E5%AE%9A%E5%AF%86%E7%A0%81.html">win10 uwp ç»‘å®šå¯†ç </a> æŸ¥çœ‹ã€‚</p>

<!--more-->

<!-- CreateTime:2018/2/13 17:23:03 -->

<div id="toc"></div>

<p>æˆ‘åœ¨ç½‘ä¸Šæ‰¾çš„å¾ˆå¤šå¤§ç¥ç»™å‡ºçš„å¯ä»¥è§£å†³ç»‘å®šå¯†ç çš„æ–¹æ³•ï¼Œä¸‹é¢æ˜¯æˆ‘æ‰¾çš„ä¸€ä¸ªç®€å•æ–¹æ³•ã€‚</p>

<p>é¦–å…ˆéœ€è¦æ–°å»ºä¸€ä¸ªç±» PasswordHelper ï¼Œä»–æ˜¯ä¸€ä¸ªé™æ€ç±»ï¼Œå½“ç„¶ä¸æ˜¯é™æ€ä¹Ÿæ²¡å…³ç³»ï¼Œä½†æ˜¯ä¸€èˆ¬å†™é™æ€çš„å¯ä»¥è®©æˆ‘ä»¬å°‘çŠ¯é”™ï¼Œå› ä¸ºæˆ‘ä»¬æ‰€æœ‰å±æ€§ç­‰éƒ½æ˜¯éœ€è¦é™æ€çš„ã€‚</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">PasswordHelper</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">DependencyProperty</span> <span class="n">PasswordProperty</span> <span class="p">=</span>
            <span class="n">DependencyProperty</span><span class="p">.</span><span class="nf">RegisterAttached</span><span class="p">(</span><span class="s">"Password"</span><span class="p">,</span>
            <span class="k">typeof</span><span class="p">(</span><span class="kt">string</span><span class="p">),</span> <span class="k">typeof</span><span class="p">(</span><span class="n">PasswordHelper</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">FrameworkPropertyMetadata</span><span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">,</span> <span class="n">OnPasswordPropertyChanged</span><span class="p">));</span>

        <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">DependencyProperty</span> <span class="n">AttachProperty</span> <span class="p">=</span>
            <span class="n">DependencyProperty</span><span class="p">.</span><span class="nf">RegisterAttached</span><span class="p">(</span><span class="s">"Attach"</span><span class="p">,</span>
            <span class="k">typeof</span><span class="p">(</span><span class="kt">bool</span><span class="p">),</span> <span class="k">typeof</span><span class="p">(</span><span class="n">PasswordHelper</span><span class="p">),</span> <span class="k">new</span> <span class="nf">PropertyMetadata</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="n">Attach</span><span class="p">));</span>

        <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">DependencyProperty</span> <span class="n">IsUpdatingProperty</span> <span class="p">=</span>
           <span class="n">DependencyProperty</span><span class="p">.</span><span class="nf">RegisterAttached</span><span class="p">(</span><span class="s">"IsUpdating"</span><span class="p">,</span> <span class="k">typeof</span><span class="p">(</span><span class="kt">bool</span><span class="p">),</span>
           <span class="k">typeof</span><span class="p">(</span><span class="n">PasswordHelper</span><span class="p">));</span>


        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SetAttach</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">dp</span><span class="p">,</span> <span class="kt">bool</span> <span class="k">value</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dp</span><span class="p">.</span><span class="nf">SetValue</span><span class="p">(</span><span class="n">AttachProperty</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">GetAttach</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">dp</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="n">dp</span><span class="p">.</span><span class="nf">GetValue</span><span class="p">(</span><span class="n">AttachProperty</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetPassword</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">dp</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="n">dp</span><span class="p">.</span><span class="nf">GetValue</span><span class="p">(</span><span class="n">PasswordProperty</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SetPassword</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">dp</span><span class="p">,</span> <span class="kt">string</span> <span class="k">value</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dp</span><span class="p">.</span><span class="nf">SetValue</span><span class="p">(</span><span class="n">PasswordProperty</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">GetIsUpdating</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">dp</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="n">dp</span><span class="p">.</span><span class="nf">GetValue</span><span class="p">(</span><span class="n">IsUpdatingProperty</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SetIsUpdating</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">dp</span><span class="p">,</span> <span class="kt">bool</span> <span class="k">value</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dp</span><span class="p">.</span><span class="nf">SetValue</span><span class="p">(</span><span class="n">IsUpdatingProperty</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">OnPasswordPropertyChanged</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">sender</span><span class="p">,</span>
            <span class="n">DependencyPropertyChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">PasswordBox</span> <span class="n">passwordBox</span> <span class="p">=</span> <span class="n">sender</span> <span class="k">as</span> <span class="n">PasswordBox</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">passwordBox</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">-=</span> <span class="n">PasswordChanged</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(!(</span><span class="kt">bool</span><span class="p">)</span><span class="nf">GetIsUpdating</span><span class="p">(</span><span class="n">passwordBox</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">passwordBox</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="n">NewValue</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">+=</span> <span class="n">PasswordChanged</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Attach</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">sender</span><span class="p">,</span>
            <span class="n">DependencyPropertyChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">PasswordBox</span> <span class="n">passwordBox</span> <span class="p">=</span> <span class="n">sender</span> <span class="k">as</span> <span class="n">PasswordBox</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">passwordBox</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="k">return</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">((</span><span class="kt">bool</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="n">OldValue</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">-=</span> <span class="n">PasswordChanged</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">((</span><span class="kt">bool</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="n">NewValue</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">+=</span> <span class="n">PasswordChanged</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">PasswordChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">PasswordBox</span> <span class="n">passwordBox</span> <span class="p">=</span> <span class="n">sender</span> <span class="k">as</span> <span class="n">PasswordBox</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">passwordBox</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nf">SetIsUpdating</span><span class="p">(</span><span class="n">passwordBox</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
                <span class="nf">SetPassword</span><span class="p">(</span><span class="n">passwordBox</span><span class="p">,</span> <span class="n">passwordBox</span><span class="p">.</span><span class="n">Password</span><span class="p">);</span>
                <span class="nf">SetIsUpdating</span><span class="p">(</span><span class="n">passwordBox</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

</code></pre></div></div>

<p>å†™å®Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä»–ï¼Œä½¿ç”¨å¾ˆç®€å•ï¼Œåœ¨æˆ‘ä»¬éœ€è¦å¯†ç æ¡†çš„é¡µé¢çš„xaml ä¸Šå†™ä¸¤è¡Œæ–°çš„ä»£ç å°±å¥½ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;PasswordBox</span> <span class="na">local:PasswordHelper.Attach=</span><span class="s">"True"</span> 
                             <span class="na">local:PasswordHelper.Password=</span><span class="s">"{Binding Password, Mode=TwoWay}"</span> 
                             <span class="na">Width=</span><span class="s">"180"</span> <span class="na">Style=</span><span class="s">"{DynamicResource PasswordBoxStyle}"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<p>å…¶ä¸­ï¼ŒPassword æ˜¯ ViewModel çš„PassWordï¼Œå¾ˆç®€å•æˆ‘ä»¬æŠŠPasswordBox ç»‘å®šåˆ°ViewModelã€‚</p>

<p>PASSWORDPROPERTYæ˜¯é™„åŠ å±æ€§ï¼ŒREGISTERATTACHED å°±æ˜¯æ³¨å†Œé™„åŠ ã€‚</p>

<p>æˆ‘ä»¬é™„åŠ å±æ€§æ˜¯å›è°ƒï¼Œå½“å±æ€§å˜åŒ–ä½¿ç”¨å‡½æ•°ã€‚</p>

<p>æˆ‘ä»¬éœ€è¦è®¾ç½®Attachï¼Œè®¾ç½®æ—¶è°ƒç”¨<code class="language-plaintext highlighter-rouge">static void Attach(DependencyObject sender,           DependencyPropertyChangedEventArgs e)</code></p>

<p>åœ¨ Attach è§¦å‘ï¼Œé¦–å…ˆè¦åˆ¤æ–­è®¾ç½®çš„ sender æ˜¯ä¸æ˜¯ Password</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="n">PasswordBox</span> <span class="n">passwordBox</span> <span class="p">=</span> <span class="n">sender</span> <span class="k">as</span> <span class="n">PasswordBox</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">passwordBox</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

</code></pre></div></div>
<p>åˆ¤æ–­æ”¹å˜çš„å€¼ï¼ŒOldæ˜¯trueè¿˜æ˜¯falseï¼Œå¦‚æœæ˜¯trueï¼Œé‚£ä¹ˆä¹‹å‰ç”¨äº†äº‹ä»¶ï¼Œæˆ‘ä»¬è¦æŠŠäº‹ä»¶</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">-=</span> <span class="n">PasswordChanged</span><span class="p">;</span>

</code></pre></div></div>
<p>å¦‚æœä¹‹å‰æ˜¯falseï¼Œé‚£ä¹ˆæ²¡ç»‘å®šï¼Œæˆ‘ä»¬ä¸èƒ½åˆ é™¤ã€‚</p>

<p>åˆ¤æ–­è¦æ”¹å˜çš„ï¼Œå¦‚æœæ˜¯trueï¼Œæˆ‘ä»¬å°±</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">+=</span> <span class="n">PasswordChanged</span><span class="p">;</span>

</code></pre></div></div>

<p>å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±ä¸ä½¿ç”¨ã€‚</p>

<p>æˆ‘ä»¬ä½¿ç”¨äº†æ˜¯å¦å­˜åœ¨å¯†ç ä¿®æ”¹å°±ä½¿ç”¨PasswordChangedå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è®¾ç½®äº†åˆšæ‰çš„å°±å¯åœ¨å¯†ç å˜åŒ–ä½¿ç”¨PasswordChangedã€‚</p>

<p>æˆ‘ä»¬åœ¨PasswordChangedåˆ¤æ–­è¾“å…¥æ˜¯ä¸æ˜¯PasswordBoxï¼ŒæŠŠå¯†ç ä¼ è¿›PasswordPropertyã€‚</p>

<p>å‚è§ï¼šhttp://www.wpftutorial.net/PasswordBox.html</p>

<p>è¿˜æœ‰ä¸€ä¸ªç®€å•æ–¹æ³•</p>

<script src="https://gist.github.com/taylorleese/468331.js"></script>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.Windows</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Windows.Controls</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">CustomControl</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BindablePasswordBox</span> <span class="p">:</span> <span class="n">Decorator</span>
    <span class="p">{</span>
        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// The password dependency property.</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">DependencyProperty</span> <span class="n">PasswordProperty</span><span class="p">;</span>

        <span class="k">private</span> <span class="kt">bool</span> <span class="n">isPreventCallback</span><span class="p">;</span>
        <span class="k">private</span> <span class="n">RoutedEventHandler</span> <span class="n">savedCallback</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// Static constructor to initialize the dependency properties.</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">static</span> <span class="nf">BindablePasswordBox</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">PasswordProperty</span> <span class="p">=</span> <span class="n">DependencyProperty</span><span class="p">.</span><span class="nf">Register</span><span class="p">(</span>
                <span class="s">"Password"</span><span class="p">,</span>
                <span class="k">typeof</span><span class="p">(</span><span class="kt">string</span><span class="p">),</span>
                <span class="k">typeof</span><span class="p">(</span><span class="n">BindablePasswordBox</span><span class="p">),</span>
                <span class="k">new</span> <span class="nf">FrameworkPropertyMetadata</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="n">FrameworkPropertyMetadataOptions</span><span class="p">.</span><span class="n">BindsTwoWayByDefault</span><span class="p">,</span> <span class="k">new</span> <span class="nf">PropertyChangedCallback</span><span class="p">(</span><span class="n">OnPasswordPropertyChanged</span><span class="p">))</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// Saves the password changed callback and sets the child element to the password box.</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="nf">BindablePasswordBox</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">savedCallback</span> <span class="p">=</span> <span class="n">HandlePasswordChanged</span><span class="p">;</span>

            <span class="n">PasswordBox</span> <span class="n">passwordBox</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PasswordBox</span><span class="p">();</span>
            <span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">+=</span> <span class="n">savedCallback</span><span class="p">;</span>
            <span class="n">Child</span> <span class="p">=</span> <span class="n">passwordBox</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// The password dependency property.</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Password</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">GetValue</span><span class="p">(</span><span class="n">PasswordProperty</span><span class="p">)</span> <span class="k">as</span> <span class="kt">string</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">set</span> <span class="p">{</span> <span class="nf">SetValue</span><span class="p">(</span><span class="n">PasswordProperty</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span> <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// Handles changes to the password dependency property.</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="d"&gt;the dependency object&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="eventArgs"&gt;the event args&lt;/param&gt;</span>
        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">OnPasswordPropertyChanged</span><span class="p">(</span><span class="n">DependencyObject</span> <span class="n">d</span><span class="p">,</span> <span class="n">DependencyPropertyChangedEventArgs</span> <span class="n">eventArgs</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">BindablePasswordBox</span> <span class="n">bindablePasswordBox</span> <span class="p">=</span> <span class="p">(</span><span class="n">BindablePasswordBox</span><span class="p">)</span> <span class="n">d</span><span class="p">;</span>
            <span class="n">PasswordBox</span> <span class="n">passwordBox</span> <span class="p">=</span> <span class="p">(</span><span class="n">PasswordBox</span><span class="p">)</span> <span class="n">bindablePasswordBox</span><span class="p">.</span><span class="n">Child</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">bindablePasswordBox</span><span class="p">.</span><span class="n">isPreventCallback</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">-=</span> <span class="n">bindablePasswordBox</span><span class="p">.</span><span class="n">savedCallback</span><span class="p">;</span>
            <span class="n">passwordBox</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="p">(</span><span class="n">eventArgs</span><span class="p">.</span><span class="n">NewValue</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span> <span class="p">?</span> <span class="n">eventArgs</span><span class="p">.</span><span class="n">NewValue</span><span class="p">.</span><span class="nf">ToString</span><span class="p">()</span> <span class="p">:</span> <span class="s">""</span><span class="p">;</span>
            <span class="n">passwordBox</span><span class="p">.</span><span class="n">PasswordChanged</span> <span class="p">+=</span> <span class="n">bindablePasswordBox</span><span class="p">.</span><span class="n">savedCallback</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// Handles the password changed event.</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="sender"&gt;the sender&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="eventArgs"&gt;the event args&lt;/param&gt;</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">HandlePasswordChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">eventArgs</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">PasswordBox</span> <span class="n">passwordBox</span> <span class="p">=</span> <span class="p">(</span><span class="n">PasswordBox</span><span class="p">)</span> <span class="n">sender</span><span class="p">;</span>

            <span class="n">isPreventCallback</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="n">Password</span> <span class="p">=</span> <span class="n">passwordBox</span><span class="p">.</span><span class="n">Password</span><span class="p">;</span>
            <span class="n">isPreventCallback</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

:ET