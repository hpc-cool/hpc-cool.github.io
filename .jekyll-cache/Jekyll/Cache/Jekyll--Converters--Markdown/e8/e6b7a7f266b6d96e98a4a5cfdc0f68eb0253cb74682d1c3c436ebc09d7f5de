I"Ñ$<p>å¦‚æœåœ¨ UWP æœ‰ä¸€ä¸ªæ§ä»¶é‡Œé¢æœ‰ ScrollViewer æ§ä»¶ï¼Œé‚£ä¹ˆå› ä¸ºé»˜è®¤çš„ ScrollViewer ä¼šä½¿ç”¨è§¦æ‘¸çš„äº¤äº’ï¼Œè¿™æ ·åœ¨æ§ä»¶å°±æ”¶ä¸åˆ°è§¦æ‘¸çš„äº¤äº’</p>

<!--more-->

<!-- CreateTime:2019/1/25 21:45:37 -->

<!-- csdn -->

<p>é€šè¿‡ <code class="language-plaintext highlighter-rouge">VerticalScrollMode="Disabled" HorizontalScrollMode="Disabled"</code> å¯ä»¥å…³é—­ ScrollViewer äº¤äº’</p>

<p>æ¥ä¸‹æ¥å°±æ˜¯ç®€å•å‘Šè¯‰å¤§å®¶å¦‚ä½•ä½¿ç”¨ ScrollViewer åœ¨ç¦ç”¨é»˜è®¤äº¤äº’è¿˜è®© ScrollViewer æ»‘åŠ¨ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„ UWP é¡¹ç›®</p>

<p>æ‰“å¼€ xaml æ·»åŠ ä¸€ç‚¹ä»£ç ï¼Œåˆ›å»ºä¸€ä¸ª Canvas æ”¾åœ¨ ScrollViewer å†…ï¼Œåœ¨é‡Œé¢æ”¾ä¸€ä¸ªçŸ©å½¢ï¼Œé€šè¿‡è¿™ä¸ªçŸ©å½¢å°±å¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰ç§»åŠ¨</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">&lt;</span><span class="n">ScrollViewer</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">Canvas</span> <span class="n">Width</span><span class="p">=</span><span class="s">"100000"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"10000000"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="n">Rectangle</span> <span class="n">Width</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Fill</span><span class="p">=</span><span class="s">"Black"</span> 
                           <span class="n">Canvas</span><span class="p">.</span><span class="n">Left</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Canvas</span><span class="p">.</span><span class="n">Top</span><span class="p">=</span><span class="s">"100"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="n">Canvas</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">ScrollViewer</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>åˆ›å»ºçš„ ScrollViewer åªæœ‰å¯¹æ°´å¹³åšæ»‘åŠ¨ï¼Œå°è¯•ç”¨è§¦æ‘¸æ»‘åŠ¨çŸ©å½¢ï¼Œä¼šå‘ç°åªèƒ½é€šè¿‡å‚ç›´æ»‘åŠ¨</p>

<p>å¦‚æœæƒ³æ°´å¹³ä¹Ÿå¯ä»¥æ»šåŠ¨ï¼Œéœ€è¦è®¾ç½® HorizontalScrollBarVisibility å±æ€§ï¼Œè®¾ç½®ä¸º Auto Hidden  Visible éƒ½å¯ä»¥</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">&lt;</span><span class="n">ScrollViewer</span> <span class="n">HorizontalScrollBarVisibility</span><span class="p">=</span><span class="s">"Hidden"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">Canvas</span> <span class="n">Width</span><span class="p">=</span><span class="s">"100000"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"10000000"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="n">Rectangle</span> <span class="n">Width</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Fill</span><span class="p">=</span><span class="s">"Black"</span> 

                           <span class="n">Canvas</span><span class="p">.</span><span class="n">Left</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Canvas</span><span class="p">.</span><span class="n">Top</span><span class="p">=</span><span class="s">"100"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="n">Canvas</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">ScrollViewer</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>ç°åœ¨å†è¯•è¯•è§¦æ‘¸çŸ©å½¢</p>

<p>å¦‚æœç°åœ¨å°è¯•æ‹¿åˆ° æ»šåŠ¨æ¡å¤–é¢çš„ Grid çš„ Manipulation äº‹ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æ²¡è¢«è¢«è°ƒç”¨</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">&lt;</span><span class="n">Grid</span> <span class="n">Background</span><span class="p">=</span><span class="s">"Transparent"</span> <span class="n">ManipulationMode</span><span class="p">=</span><span class="s">"TranslateX,TranslateY"</span> <span class="n">ManipulationDelta</span><span class="p">=</span><span class="s">"Grid_OnManipulationDelta"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="n">ScrollViewer</span> <span class="n">HorizontalScrollBarVisibility</span><span class="p">=</span><span class="s">"Hidden"</span>
                      <span class="n">HorizontalScrollMode</span><span class="p">=</span><span class="s">"Disabled"</span>
                      <span class="n">VerticalScrollMode</span><span class="p">=</span><span class="s">"Disabled"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">Canvas</span>  <span class="n">Width</span><span class="p">=</span><span class="s">"100000"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"10000000"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="n">Rectangle</span> <span class="n">Width</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Height</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Fill</span><span class="p">=</span><span class="s">"Black"</span> 
                           <span class="n">Canvas</span><span class="p">.</span><span class="n">Left</span><span class="p">=</span><span class="s">"100"</span> <span class="n">Canvas</span><span class="p">.</span><span class="n">Top</span><span class="p">=</span><span class="s">"100"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="n">Canvas</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">ScrollViewer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="n">Grid</span><span class="p">&gt;</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">Grid_OnManipulationDelta</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">ManipulationDeltaRoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            
        <span class="p">}</span>
</code></pre></div></div>

<p>è¿™é‡Œéœ€è¦è®¾ç½® Grid çš„èƒŒæ™¯å’Œè®¾ç½® ManipulationMode å¯ä»¥æ°´å¹³æˆ–å‚ç›´ï¼Œè®¾ç½® Grid çš„èƒŒæ™¯æ˜¯è®© Grid æœ‰å‘½ä¸­æµ‹è¯•ï¼Œè¿™æ · UWP æ‰çŸ¥é“ç”¨æˆ·ç‚¹å‡»åˆ°å“ªä¸ªæ§ä»¶ï¼Œé€šè¿‡ ManipulationMode æ‰å¯ä»¥è®©äº‹ä»¶çŸ¥é“å¯ä»¥å¦‚ä½•åš</p>

<p>é‚£ä¹ˆå¦‚ä½•è®© Grid æ¥æ”¶åˆ° Manipulation æˆ–è€… Pointer äº‹ä»¶ï¼Ÿ</p>

<p>å°è¯•ä¸‹é¢çš„ä»£ç </p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">&lt;</span><span class="n">ScrollViewer</span> <span class="n">HorizontalScrollBarVisibility</span><span class="p">=</span><span class="s">"Hidden"</span>
                      <span class="n">HorizontalScrollMode</span><span class="p">=</span><span class="s">"Disabled"</span>
                      <span class="n">VerticalScrollMode</span><span class="p">=</span><span class="s">"Disabled"</span><span class="p">&gt;</span>
                      <span class="err">â€¦â€¦</span>
        <span class="p">&lt;/</span><span class="n">ScrollViewer</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>æ­¤æ—¶å°±å¯ä»¥çœ‹åˆ° Grid æ”¶åˆ° Pointer äº‹ä»¶</p>

<p>ä½†æ˜¯å¦‚æœæƒ³è¦ ScrollViewer å¤–é¢çš„æ§ä»¶å¯ä»¥æ”¶åˆ°äº¤äº’åŒæ—¶æƒ³è¦è®© ScrollViewer å¯ä»¥å’Œä¹‹å‰ä¸€æ ·ï¼Œé‚£ä¹ˆå°±éœ€è¦è‡ªå·±å†™ä¸€äº›ä»£ç </p>

<p>é¦–å…ˆç»™ ScrollViewer å‘½åï¼Œè¿™æ ·åœ¨åå°ä»£ç æ‰å¯ä»¥ä½¿ç”¨</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">private</span> <span class="k">void</span> <span class="nf">Grid_OnManipulationDelta</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">ManipulationDeltaRoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">ScrollViewer</span><span class="p">.</span><span class="nf">ChangeView</span><span class="p">(</span><span class="n">ScrollViewer</span><span class="p">.</span><span class="n">HorizontalOffset</span> <span class="p">-</span> <span class="n">e</span><span class="p">.</span><span class="n">Delta</span><span class="p">.</span><span class="n">Translation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span>
                <span class="n">ScrollViewer</span><span class="p">.</span><span class="n">VerticalOffset</span> <span class="p">-</span> <span class="n">e</span><span class="p">.</span><span class="n">Delta</span><span class="p">.</span><span class="n">Translation</span><span class="p">.</span><span class="n">Y</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>ç°åœ¨å°è¯•è¿è¡Œä¸€ä¸‹ä»£ç ï¼Œæ‰ä¸å‘Šè¯‰å¤§å®¶ ChangeView æœ‰ä¸€ä¸ªå±æ€§éœ€è¦ä¿®æ”¹ä¸º true çœ‹èµ·æ¥æ¸…çœŸ</p>

:ET